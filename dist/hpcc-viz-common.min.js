!function(t,e){"function"==typeof define&&define.amd?define("common/Class.js",[],e):t.common_Class=e()}(this,function(){function t(){}return t.prototype.constructor=t,t.prototype._class="common_Class",t.prototype["class"]=function(t){return arguments.length?(this._class=t,this):this._class},t.prototype.classID=function(){return this._class.split(" ").pop()},t.prototype["implements"]=function(t){for(var e in t)void 0===this[e]&&t.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.mixin=function(t){this["implements"](t.prototype);for(var e in t.prototype)"_class"===e&&t.prototype.hasOwnProperty(e)&&(this[e]+=" "+t.prototype[e])},t}),function(t,e){"function"==typeof define&&define.amd?define("common/Platform.js",["d3","es6-promise"],e):(t.require=t.require||function(e,i){"function"==typeof e&&(i=e,e=[]);var n=e.map(function(e){var i=0===e.indexOf("src/")?"src/".length:0===e.indexOf("hpcc-viz/")?"hpcc-viz/".length:0===e.indexOf("../")?"../".length:0,n=e.substring(i).split("/").join("_");return t[n]});i.apply(null,n)},t.common_Platform=e(t.d3))}(this,function(t){function e(){}var i="1.14.0-rc2";return e.prototype.version=function(){return i},e.prototype.ieVersion=function(){var t,e=navigator.userAgent,i=e.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(i[1])?(t=/\brv[ :]+(\d+)/g.exec(e)||[],parseFloat(t[1])):/msie/i.test(i[1])?parseFloat(i[2]):null}(),e.prototype.isIE=null!==e.prototype.ieVersion,e.prototype.svgMarkerGlitch=e.prototype.isIE&&e.prototype.ieVersion<=12,e.prototype.MutationObserver=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver||function(t){this.callback=t,this.listeners=[];var e=function(t,e,i){this.callback=t,this.domNode=e,this.type=i};e.prototype={handleEvent:function(t){var e={type:this.type,target:this.domNode,addedNodes:[],removedNodes:[],previousSibling:t.target.previousSibling,nextSibling:t.target.nextSibling,attributeName:null,attributeNamespace:null,oldValue:null};this.callback([e])}},this.observe=function(t,i){var n=null;i.attributes&&(n=new e(this.callback,t,"attributes"),this.listeners.push(n),t.addEventListener("DOMAttrModified",n,!0)),i.characterData&&(n=new e(this.callback,t,"characterData"),this.listeners.push(n),t.addEventListener("DOMCharacterDataModified",n,!0)),i.childList&&(n=new e(this.callback,t,"childList"),this.listeners.push(n),t.addEventListener("DOMNodeInserted",n,!0),t.addEventListener("DOMNodeRemoved",n,!0))},this.disconnect=function(){this.listeners.forEach(function(t){switch(t.type){case"attributes":t.domNode.removeEventListener("DOMAttrModified",t,!0);break;case"characterData":t.domNode.removeEventListener("DOMCharacterDataModified",t,!0);break;case"childList":t.domNode.removeEventListener("DOMNodeRemoved",t,!0),t.domNode.removeEventListener("DOMNodeInserted",t,!0)}}),this.listeners=[]}},window.MutationObserver||(window.MutationObserver=e.prototype.MutationObserver),e.prototype._scrollBarWidth=null,e.prototype.getScrollbarWidth=function(){if(null===e.prototype._scrollBarWidth){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var i=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;t.parentNode.removeChild(t),e.prototype._scrollBarWidth=i-o}return e.prototype._scrollBarWidth},e.prototype.debounce=function(t,e,i){return function(){function n(){i||t.apply(o,r),o.timeout=null}var o=this||{},r=arguments;o.timeout?clearTimeout(o.timeout):i&&t.apply(o,r),o.timeout=setTimeout(n,e||100)}},e}),function(t,e){"function"==typeof define&&define.amd?define("common/PropertyExt.js",["d3"],e):t.common_PropertyExt=e(t.d3)}(this,function(t){function e(t){return 0===t.indexOf(s)}function i(t,e){return t[a+e]}function n(t,e,i,n,o,r){switch(r=r||{},this.id=t,this.type=i,this.origDefaultValue=e,this.defaultValue=r.optional&&null===e?void 0:e,this.description=n,this.set=o,this.ext=r,i){case"set":this.checkedAssign=function(e){return(!o||o.indexOf(e)<0)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"html-color":this.checkedAssign=function(e){if(window.__hpcc_debug&&e&&"red"!==e){var n="red",o=document.createElement("div");o.style.color=n,o.style.color=e,(o.style.color===n||""===o.style.color)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i)}return e};break;case"boolean":this.checkedAssign=function(t){return"string"==typeof t&&["false","off","0"].indexOf(t.toLowerCase())>=0?!1:Boolean(t)};break;case"number":this.checkedAssign=function(t){return Number(t)};break;case"string":this.checkedAssign=function(t){return String(t)};break;case"array":this.checkedAssign=function(e){return e instanceof Array||console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"object":this.checkedAssign=function(e){return e instanceof Object||console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"widget":this.checkedAssign=function(e){return(!e._class||e._class.indexOf("common_PropertyExt")<0)&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"widgetArray":this.checkedAssign=function(e){return e.some(function(t){return!t._class||t._class.indexOf("common_Widget")<0})&&console.error("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"propertyArray":this.checkedAssign=function(e){return e.some(function(t){return!t.publishedProperties})&&console.log("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;case"propertyArray":this.checkedAssign=function(e){return e.some(function(t){return!t.publishedProperties})&&console.log("Invalid value for '"+t+"':  "+e+" expected "+i),e};break;default:this.checkedAssign=function(e){return window.__hpcc_debug&&console.error("Unchecked property type for '"+t+"':  "+e+" expected "+i),e}}}function o(t,e,i,n,o){this.id=t,this.type="proxy",this.proxy=e,this.method=i,this.defaultValue=n,this.ext=o||{}}function r(){this._id="_pe"+ ++p,this._watchArr=[],this.publishedProperties(!0).forEach(function(t){switch(t.type){case"array":case"widgetArray":case"propertyArray":this[h+t.id]=[]}},this)}var s="__meta_",a="__private_",h="__prop_",l="__default_",p=0;return r.prototype._class="common_PropertyExt",r.prototype.publishedProperties=function(t){var n=[];for(var o in this)!e(o)||!t&&i(this,o)||n.push(this[o]);return n},r.prototype.publishedProperty=function(t){return this[s+t]},r.prototype.publishedProperty=function(t){return this[s+t]},r.prototype.publishReset=function(t,i){t=(t||[]).map(function(t){return s+t}),i=(i||[]).map(function(t){return s+t});for(var n in this)if(e(n)){var o=!t.length||t.length&&t.indexOf(n)>=0,r=i.indexOf(n)>=0;o&&!r&&(this[a+n]=!0)}},r.prototype.publish=function(t,e,i,o,r,a){if(void 0!==this[s+t]&&!a.override)throw t+" is already published.";var p=this[s+t]=new n(t,e,i,o,r,a);this[t]=function(e){return arguments.length?(""===e&&p.ext.optional?e=null:null!==e&&(e=p.checkedAssign(e)),this.broadcast(t,e,this[h+t]),null===e?delete this[h+t]:this[h+t]=e,this):this[t+"_disabled"]()?this[t+"_default"]():void 0!==this[h+t]?this[h+t]:this[t+"_default"]()},this[t+"_disabled"]=function(){return a&&a.disable?a.disable(this):!1},this[t+"_modified"]=function(){return void 0!==this[h+t]&&this[h+t]!==this[t+"_default"]()},this[t+"_exists"]=function(){return void 0!==this[h+t]||void 0!==this[t+"_default"]()},this[t+"_default"]=function(e){return arguments.length?(""===e&&(e=null),null===e?delete this[l+t]:this[l+t]=e,this):void 0!==this[l+t]?this[l+t]:p.defaultValue},this[t+"_reset"]=function(){switch(i){case"widget":this[h+t]&&this[h+t].target(null);break;case"widgetArray":this[h+t]&&this[h+t].forEach(function(t){t.target(null)})}switch(i){case"array":case"widgetArray":case"propertyArray":this[h+p.id]=[];break;default:delete this[h+t]}}},r.prototype.publishWidget=function(t,e,i){for(var n in e.prototype)if(0===n.indexOf("__meta")){var o=e.prototype[n];this.publishProxy(t+h+o.id,i,o.method||o.id)}},r.prototype.publishProxy=function(t,e,i,n){if(i=i||t,void 0!==this[s+t])throw t+" is already published.";this[s+t]=new o(t,e,i,n),this[t]=function(o){return arguments.length?(n&&o===n?this[e][i+"_reset"]():this[e][i](o),this):!n||this[t+"_modified"]()?this[e][i]():n},this[t+"_disabled"]=function(){return this[e][i+"_disabled"]()},this[t+"_modified"]=function(){return this[e][i+"_modified"]()&&(!n||this[e][i]()!==n)},this[t+"_exists"]=function(){return this[e][i+"_exists"]()},this[t+"_default"]=function(t){return arguments.length?(this[e][i+"_default"](t),this):this[e][i+"_default"]()},this[t+"_reset"]=function(){this[e][i+"_reset"]()}},r.prototype._monitorProperty=function(t,e){var i=this,n=this._watchArr.push({propertyID:t,callback:e})-1;return{remove:function(){delete i._watchArr[n]}}},r.prototype.monitor=function(t){var e=this;return 0===this._watchArr.length&&this.publishedProperties().forEach(function(t){switch(t.type){case"proxy":this[t.proxy]&&this[t.proxy]._monitorProperty(t.id,function(t,i,n){e.broadcast(t,i,n)})}},this),this._monitorProperty(void 0,t)},r.prototype.broadcast=function(t,e,i,n){n=n||this,this._watchArr.length&&e!==i&&this._watchArr.forEach(function(o){void 0!==o.propertyID&&o.propertyID!==t||!o.callback||setTimeout(function(){o.callback(t,e,i,n)},0)})},r.prototype.applyTheme=function(t){if(t){var e=this._class.split(" ");for(var i in e)if(t[e[i]])for(var n in t[e[i]])if("overrideTags"===n&&t[e[i]][n]instanceof Object)for(var o in t[e[i]][n])this.publishedProperty(n).ext&&(this.publishedProperty(n).ext.tags=t[e[i]][n][o]);else this.publishedProperty(n)&&(this.publishedProperty(n).defaultValue=t[e[i]][n])}},r.prototype.copyPropsTo=function(t){this.publishedProperties(!1).forEach(function(e){this[e.id+"_exists"]()?t[e.id](this[e.id]()):t[e.id+"_reset"]()},this)},r}),function(t,e){"function"==typeof define&&define.amd?define("common/Database.js",["d3","./Class","./PropertyExt"],e):t.common_Database=e(t.d3,t.common_Class,t.common_PropertyExt)}(this,function(t,e,i){function n(t,n){e.call(this),i.call(this),this._id=t||this._id,n=n||{},this.label(n.label||""),this.type(n.type||""),this.mask(n.mask||null),this.format(n.format||null)}function o(){e.call(this),i.call(this),this.clear()}function r(t,e){return t instanceof Array||(t=[t]),t.filter(function(t){return""!==t}).every(e)}function s(t){return"boolean"==typeof t}function a(t){return"number"==typeof t||!isNaN(t)}function h(t){return"string"==typeof t}function l(e,i){for(var n=0;n<e.length;++n){var o=t.time.format(e[n]).parse(i);if(o)return _=e[n],e[n]}return null}function p(t){return l(v,t)}function c(t){return l(x,t)}function u(t){return l(b,t)}function d(t){return["AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA","HI","ID","IL","IN","IA","KS","KY","LA","ME","MD","MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ","NM","NY","NC","ND","OH","OK","OR","PA","RI","SC","SD","TN","TX","UT","VT","VA","WA","WV","WI","WY","AS","DC","FM","GU","MH","MP","PW","PR","VI"].indexOf(String(t).toUpperCase())>=0}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.mixin(i),n.prototype._class+=" common_Database.Field",n.prototype.id=function(){return this._id},n.prototype.publish("label","","string","Label"),n.prototype.publish("type","","set","Type",["","string","number","boolean","time"]);var f=n.prototype.type;n.prototype.type=function(t){var e=f.apply(this,arguments);if(arguments.length)switch(this.type()){case"number":this._typeTransformer=function(t){return Number(t)};break;case"string":this._typeTransformer=function(t){return String(t)};break;case"boolean":this._typeTransformer=function(t){return"string"==typeof t&&["false","off","0"].indexOf(t.toLowerCase())>=0?!1:Boolean(t)};break;case"time":case"date":this._typeTransformer=function(t){return this._maskTransformer.parse(t)};break;default:this._typeTransformer=function(t){return t}}return e},n.prototype.publish("mask","","string","Time Mask");var y=n.prototype.mask;n.prototype.mask=function(t){var e=y.apply(this,arguments);return arguments.length&&(this._maskTransformer=this.formatter(t)),e},n.prototype.publish("format","","string","Format");var g=n.prototype.format;n.prototype.format=function(t){var e=g.apply(this,arguments);return arguments.length&&(this._formatTransformer=this.formatter(t)),e},n.prototype.parse=function(t){if(!t)return t;try{return this._typeTransformer(t)}catch(e){return console.log("Unable to parse:  "+t),null}},n.prototype.transform=function(t){if(!t)return t;try{return this._formatTransformer(this._typeTransformer(t))}catch(e){return console.log("Unable to transform:  "+t),null}},n.prototype.clone=function(){return new n(this._id,{label:this.label(),type:this.type(),mask:this.mask(),format:this.format()})},n.prototype.formatter=function(e){var i;if(!e)return i=function(t){return t},i.parse=function(t){return t},i;switch(this.type()){case"time":case"date":return t.time.format(e)}return i=t.format(e),i.parse=function(t){return t},i},o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype.mixin(i),o.prototype._class+=" common_Database.Grid",o.prototype.publish("fields",[],"propertyArray","Fields"),o.prototype.clear=function(){return this.fields([]),this._data=[],this},o.prototype.legacyColumns=function(t){return arguments.length?(this.row(0,t),this):this.row(0)},o.prototype.legacyData=function(t,e){return o.prototype.data.apply(this,arguments)},o.prototype.field=function(t){return this.fields()[t]};var m=o.prototype.fields;o.prototype.fields=function(t,e){return arguments.length?m.call(this,e?t.map(function(t){return t.clone()}):t):m.apply(this,arguments)},o.prototype.fieldByLabel=function(t,e){return this.fields().filter(function(i,n){return i.idx=n,e?i.label().toLowerCase()===t.toLowerCase():i.label()===t})[0]},o.prototype.data=function(t,e){return arguments.length?(this._data=e?t.map(function(t){return t.map(function(t){return t})}):t,this):this._data},o.prototype.parsedData=function(){var t=this;return this._data.map(function(e){return e.map(function(e,i){return t.fields()[i].parse(e)})})},o.prototype.formattedData=function(){var t=this;return this._data.map(function(e){return e.map(function(e,i){return t.fields()[i].transform(e)})})},o.prototype.row=function(t,e){return arguments.length<2?0===t?this.fields().map(function(t){return t.label()}):this._data[t-1]:(0===t?this.fields(e.map(function(t){return(new n).label(t)})):this._data[t-1]=e,this)},o.prototype.rows=function(t){return arguments.length?(this.row(0,t[0]),this._data=t.filter(function(t,e){return e>0}),this):[this.row(0)].concat(this._data)},o.prototype.column=function(t,e){return arguments.length<2?[this.fields()[t].label()].concat(this._data.map(function(e,i){return e[t]})):(e.forEach(function(i,o){0===o?this.fields()[t]=(new n).label(e[0]):this._data[o-1][t]=i},this),this)},o.prototype.columnData=function(t,e){return arguments.length<2?this._data.map(function(e,i){return e[t]}):(e.forEach(function(e,i){this._data[i][t]=e},this),this)},o.prototype.columns=function(t){return arguments.length?(t.forEach(function(e,i){this.column(i,t[i])},this),this):this.fields().map(function(t,e){return this.column(e)},this)},o.prototype.cell=function(t,e,i){return arguments.length<3?this.row(t)[e]:(0===t?this.fields()[e]=(new n).label(i):this._data[t][e]=i,this)},o.prototype.grid=function(t){return o.prototype.rows.apply(this,arguments)},o.prototype.hipieMapSortArray=function(t){return t.map(function(t){var e=!1;0===t.indexOf("-")&&(t=t.substring(1),e=!0);var i=this.fieldByLabel(t,!0);return i||console.log("Grid.prototype.hipieMapSortArray:  Invalid sort array - "+t),{idx:i?i.idx:-1,reverse:e}},this).filter(function(t){return t.idx>=0})},o.prototype.hipieMappings=function(e){function i(t,e,n,o){var r=n.map(function(t){return t});r[e]=t.key,t.values instanceof Array?t.values.forEach(function(t){i(t,e+1,r,o)}):(r[e+1]=t.values,o.push(r))}var n=-1,o=[],r=[],s=-1,a=[];if(e.forEach(function(t,e){if(t instanceof Object)switch(t["function"]){case"SUM":case"AVE":case"MIN":case"MAX":n>=0&&console.log("Rollup field already exists - there should only be one?"),n=e,t.params.forEach(function(t){var e=this.fieldByLabel(t.param1,!0);e?o.push(e.idx):console.log("Grid.prototype.hipieMappings:  Invalid rollup field - "+t.param1)},this);break;case"SCALE":s>=0&&console.log("Scale field already exists - there should only be one?"),s=e,t.params.forEach(function(t){var e=this.fieldByLabel(t.param1,!0);if(e){var i=e.idx,n=t.param2;a.push(function(t){return t[i]/n})}else console.log("Grid.prototype.hipieMappings:  Invalid scale field - "+t.param1)},this);break;default:console.log("Unknown field function - "+t["function"])}else if(t.indexOf("_AVE")===t.length-4&&this.fieldByLabel(t.substring(0,t.length-4)+"_SUM",!0)&&this.fieldByLabel("base_count",!0)){console.log("Deprecated - Symposium AVE Hack");var i=this.fieldByLabel(t.substring(0,t.length-4)+"_SUM",!0),h=this.fieldByLabel("base_count",!0);r.push(i.idx),a.push(function(t){return t[i.idx]/t[h.idx]})}else{var l=this.fieldByLabel(t,!0);l&&(r.push(l.idx),a.push(function(t){return t[l.idx]}))}},this),n>=0){var h=e[n],l=[];for(var p in h.params)l.push(h.params[p]);var c=this.rollup(r,function(e){switch(h["function"]){case"SUM":return t.sum(e,function(t){return t[o[0]]});case"AVE":return t.mean(e,function(t){return t[o[0]]});case"MIN":return t.min(e,function(t){return t[o[0]]});case"MAX":return t.max(e,function(t){return t[o[0]]})}return console.log("Unsupported Mapping Function:  "+h["function"]),0}),u=[];return c instanceof Array?c.forEach(function(t){i(t,0,[],u)}):u.push([c]),u}return this._data.map(function(t){var e=[];return a.forEach(function(i){e.push(i(t))}),e})},o.prototype._nest=function(e,i){e instanceof Array||(e=[e]);var n=t.nest();return e.forEach(function(t){n.key(function(e){return e[t]})}),n},o.prototype.nest=function(t){return this._nest(t).entries(this._data)},o.prototype.rollup=function(t,e){return this._nest(t).rollup(e).entries(this._data)},o.prototype.length=function(){return this._data.length+1},o.prototype.width=function(){return this.fields().length},o.prototype.pivot=function(){return this.rows(this.columns()),this},o.prototype.clone=function(t){return(new o).fields(this.fields(),t).data(this.data(),t)},o.prototype.filter=function(t){var e={};return this.row(0).forEach(function(t,i){e[t]=i}),(new o).fields(this.fields(),!0).data(this.data().filter(function(i){for(var n in t)if(t[n]!==i[e[n]])return!1;return!0}))};var _=null;o.prototype.analyse=function(t){t instanceof Array||(t=[t]);var e=[];return t.forEach(function(t){var i=this.rollup(t,function(t){return t.length});e.push(i);var n=i.map(function(t){return t.key});this.fields()[t].isBoolean=r(n,s),this.fields()[t].isNumber=r(n,a),this.fields()[t].isString=!this.fields()[t].isNumber&&r(n,h),this.fields()[t].isUSState=this.fields()[t].isString&&r(n,d),this.fields()[t].isDateTime=this.fields()[t].isString&&r(n,p),this.fields()[t].isDateTimeFormat=_,this.fields()[t].isDate=!this.fields()[t].isDateTime&&r(n,c),this.fields()[t].isDateFormat=_,this.fields()[t].isTime=this.fields()[t].isString&&!this.fields()[t].isDateTime&&!this.fields()[t].isDate&&r(n,u),this.fields()[t].isTimeFormat=_},this),e},o.prototype.jsonObj=function(t){return arguments.length?(this.clear(),this.data(t.map(function(t,e){var i=[];for(var o in t){var r=this.row(0).indexOf(o);0>r&&(r=this.fields().length,this.fields().push((new n).label(o))),i[r]=t[o]}return i},this)),this):this._data.map(function(t){var e={};return this.row(0).forEach(function(i,n){e[i]=t[n]}),e},this)},o.prototype.json=function(t){return arguments.length?(this.jsonObj(JSON.parse(t)),this):JSON.stringify(this.jsonObj(),null,"  ")},o.prototype.csv=function(e){return arguments.length?(this.jsonObj(t.csv.parse(e)),this):t.csv.formatRows(this.grid())},o.prototype.tsv=function(e){return arguments.length?(this.jsonObj(t.tsv.parse(e)),this):t.tsv.formatRows(this.grid())};var v=[],x=["%Y-%m-%d","%Y%m%d"],b=["%H:%M:%S.%LZ","%H:%M:%SZ","%H:%M:%S"];return x.forEach(function(t){b.forEach(function(e){v.push(t+"T"+e)})}),{Field:n,Grid:o}}),function(t,e){"function"==typeof define&&define.amd?define("common/Widget.js",["d3","./Class","./Platform","./PropertyExt","./Database"],e):t.common_Widget=e(t.d3,t.common_Class,t.common_Platform,t.common_PropertyExt,t.common_Database)}(this,function(t,e,i,n,o){function r(){e.call(this),i.call(this),n.call(this),this._class=Object.getPrototypeOf(this)._class,this._id=this._idSeed+s++,this._db=new o.Grid,this._pos={x:0,y:0},this._size={width:0,height:0},this._scale=1,this._visible=!0,this._target=null,this._parentElement=null,this._parentWidget=null,this._element=t.select(),this._renderCount=0,window.__hpcc_debug&&(void 0===window.g_all&&(window.g_all={}),window.g_all[this._id]=this),window.__hpcc_theme&&this.applyTheme(window.__hpcc_theme)}var s=0;return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.mixin(i),r.prototype.mixin(n),r.prototype._class+=" common_Widget",r.prototype._idSeed="_w",r.prototype.publishProxy("fields","_db","fields"),r.prototype.publish("classed",{},"object","HTML Classes",null,{tags:["Private"]}),r.prototype["export"]=function(t){switch(t){case"TSV":return this._db.tsv();case"JSON":return this._db.json()}return this._db.csv()},r.prototype.leakCheck=function(t){for(var e=this,i=[t],n=new this.MutationObserver(function(t){var o=!1;t.forEach(function(t){for(var r=0;r<t.removedNodes.length;++r){var s=t.removedNodes.item(r);i.indexOf(s)>=0&&e._target&&(o=!0,n.disconnect())}}),o&&console.log("leak:  "+e.id()+" - "+e.classID()+"		widget.target(null); was not called for this widget before it was removed from the page.")}),o=t.parentNode;o;)n.observe(o,{childList:!0}),i.push(o),o=o.parentNode},r.prototype.on=function(e,i,n){if(void 0===this[e])throw"Method:  "+e+" does not exist.";var o=this[e];return this[e]=function(){n?t.event&&t.event.stopPropagation():o.apply(this,arguments),i.apply(this,arguments)},this},r.prototype.id=function(t){return arguments.length?(this._id=t,this):this._id},r.prototype.columns=function(t){return arguments.length?(this._db.legacyColumns(t),this):this._db.legacyColumns()},r.prototype.parsedData=function(){return this._db.parsedData()},r.prototype.formattedData=function(){return this._db.formattedData()},r.prototype.data=function(t){return arguments.length?(this._db.legacyData(t),this):this._db.legacyData()},r.prototype.cloneData=function(){return this.data().map(function(t){return t.slice(0)})},r.prototype.flattenData=function(){var t=[];return this.data().forEach(function(e,i){this.columns().filter(function(t,e){return e>0}).forEach(function(n,o){var r=e[o+1];if(r){var s={rowIdx:i,colIdx:o+1,label:e[0],value:r};t.push(s)}},this)},this),t},r.prototype.rowToObj=function(t){var e={};return this.columns().forEach(function(i,n){e[i]=t[n]}),t.length===this.columns().length+1&&(e.__lparam=t[this.columns().length]),e},r.prototype.pos=function(t){return arguments.length?(this._pos=t,this._overlayElement&&this._overlayElement.attr("transform","translate("+t.x+","+t.y+")scale("+this._scale+")"),this):this._pos},r.prototype.x=function(t){return arguments.length?(this.pos({x:t,y:this._pos.y}),this):this._pos.x},r.prototype.y=function(t){return arguments.length?(this.pos({x:this._pos.x,y:t}),this):this._pos.y},r.prototype.size=function(t){return arguments.length?(this._size=t,this._overlayElement&&this._overlayElement.attr("width",t.width).attr("height",t.height),this):this._size},r.prototype.width=function(t){return arguments.length?(this.size({width:t,height:this._size.height}),this):this._size.width},r.prototype.height=function(t){return arguments.length?(this.size({width:this._size.width,height:t}),this):this._size.height},r.prototype.resize=function(t,e){e=e||{width:0,height:0};var i,n;if(t&&t.width&&t.height)i=t.width,n=t.height;else{var o=window.getComputedStyle(this._target,null);i=parseFloat(o.getPropertyValue("width"))-e.width,n=parseFloat(o.getPropertyValue("height"))-e.height}return this.size({width:i,height:n}),this},r.prototype.scale=function(t){return arguments.length?(this._scale=t,this._overlayElement&&this._overlayElement.attr("transform","translate("+t.x+","+t.y+")scale("+this._scale+")"),this):this._scale},r.prototype.visible=function(t){return arguments.length?(this._visible=t,this._parentElement&&this._parentElement.style({visibility:this._visible?null:"hidden",opacity:this._visible?null:0}),this):this._visible},r.prototype.display=function(t){return arguments.length?(this._display=t,this._element&&this._element.style("display",this._display?null:"none"),this):this._display},r.prototype.calcSnap=function(t){function e(t,e){function i(t,e){var i=t%e;return Math.abs(i)>e-Math.abs(i)&&(i=(e-Math.abs(i))*(0>i?1:-1)),i}return t-i(t,e)}var i=e(this._pos.x-this._size.width/2,t),n=e(this._pos.y-this._size.height/2,t),o=e(this._pos.x+this._size.width/2,t),r=e(this._pos.y+this._size.height/2,t),s=o-i,a=r-n;return[{x:i+s/2,y:n+a/2},{width:s,height:a}]},r.prototype.toWidget=function(e){if(!e)return null;var i=t.select(e);if(i){var n=i.datum();if(n&&n instanceof r)return n}return null},r.prototype.locateParentWidget=function(t){t=t||this._target.parentNode;var e=this.toWidget(t);return e?e:this.locateParentWidget(t.parentNode)},r.prototype.locateSVGNode=function(t){return t?"svg"===t.tagName?t:this.locateSVGNode(t.parentNode):null},r.prototype.locateOverlayNode=function(){for(var t=this.locateParentWidget(this._target);t;){if(t._parentOverlay)return t._parentOverlay;t=this.locateParentWidget(t._target.parentNode)}return null},r.prototype.getAbsolutePos=function(t,e,i){var n=this.locateSVGNode(t);if(!n)return null;var o=n.createSVGPoint(),r=t.getCTM();o=o.matrixTransform(r);var s={x:o.x,y:o.y};if(void 0!==e&&void 0!==i){var a=n.createSVGPoint();a.x=e,a.y=i,a=a.matrixTransform(r),s.width=a.x-o.x,s.height=a.y-o.y}return s},r.prototype.hasOverlay=function(){return this._overlayElement},r.prototype.syncOverlay=function(){if(this._size.width&&this._size.height){var t=this.getAbsolutePos(this._overlayElement.node(),this._size.width,this._size.height);if(t&&(null===this.oldPos||void 0===this.oldPos||t.x!==this.oldPos.x||t.y!==this.oldPos.y||t.width!==this.oldPos.width||t.height!==this.oldPos.height)){var e=t.width/this._size.width,i=t.height/this._size.height;this._parentElement.style({left:t.x-t.width/e/2+"px",top:t.y-t.height/i/2+"px",width:t.width/e+"px",height:t.height/i+"px"});var n="scale("+e+","+i+")";this._parentElement.style("transform",n).style("-moz-transform",n).style("-ms-transform",n).style("-webkit-transform",n).style("-o-transform",n)}this.oldPos=t}},r.prototype.element=function(){return this._element},r.prototype.node=function(){return this._element.node()},r.prototype.render=function(e){if(window.__hpcc_debug){var i=Date.now();i-this._prevNow<500&&console.log("Double Render:  "+(i-this._prevNow)+" - "+this.id()+" - "+this.classID()),this._prevNow=i}if(e=e||function(){},!this.visible())return e(this),this;if(this._parentElement){if(!this._tag)throw"No DOM tag specified";var n=this._parentElement.selectAll("#"+this._id).data([this],function(t){return t._id});n.enter().append(this._tag).classed(this._class,!0).attr("id",this._id).each(function(e){e._element=t.select(this),e.enter(this,e._element),window.__hpcc_debug&&e.leakCheck(this)}),n.classed(this.classed()).each(function(t){t.preUpdate(this,t._element),t.update(this,t._element),t.postUpdate(this,t._element)}),n.exit().each(function(e){t.select(this).datum(null),e.exit(this,e._element)}).remove(),this._renderCount++}var o=[];this.publishedProperties(!0).forEach(function(t){if(!t.ext||t.ext.render!==!1)switch(t.type){case"widget":var e=this[t.id]();e&&o.push(this[t.id]());break;case"widgetArray":o=o.concat(this[t.id]())}},this);var r=this;switch(o.length){case 0:e(this);break;case 1:o[0].render(function(){e(r)});break;default:var s=o.length;o.forEach(function(t,i){setTimeout(function(){t.render(function(){0===--s&&e(r)})},0)})}return this},r.prototype.lazyRender=r.prototype.debounce(function(){this.render()},100),r.prototype.enter=function(t,e){},r.prototype.preUpdate=function(t,e){},r.prototype.update=function(t,e){},r.prototype.postUpdate=function(t,e){},r.prototype.exit=function(t,e){},r}),function(t,e){"function"==typeof define&&define.amd?define("common/CanvasWidget.js",["d3","./Widget"],e):t.common_CanvasWidget=e(t.d3,t.common_Widget)}(this,function(t,e){function i(){e.call(this),this._tag="canvas"}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_CanvasWidget",i.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);return this._parentElement.style("width",this._size.width+"px").style("height",this._size.height+"px"),this._element.attr("width",this._size.width),this._element.attr("height",this._size.height),i},i.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e)throw"Target can only be assigned once.";if(this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target){if(this._parentElement=t.select(this._target),!this._size.width&&!this._size.height){var i=parseFloat(this._parentElement.style("width")),n=parseFloat(this._parentElement.style("height"));this.size({width:i,height:n}),this.resize(this._size)}}else this.exit();return this},i.prototype.exit=function(){this._parentElement&&this._parentElement.remove(),e.prototype.exit.apply(this,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("common/Transition.js",[],e):t.common_Transition=e()}(this,function(){function t(t){this._widget=t,this._duration=250,this._delay=0,this._ease="cubic-in-out"}return t.prototype.duration=function(t){return arguments.length?(this._duration=t,this._widget):this._duration},t.prototype.delay=function(t){return arguments.length?(this._delay=t,this._widget):this._delay},t.prototype.ease=function(t){return arguments.length?(this._ease=t,this._widget):this._ease},t.prototype.apply=function(t){return this._duration||this._delay?t.transition().duration(this._duration).delay(this._delay).ease(this._ease):t},t}),function(t,e){"function"==typeof define&&define.amd?define("common/SVGWidget.js",["d3","./Widget","./Transition"],e):t.common_SVGWidget=e(t.d3,t.common_Widget,t.common_Transition)}(this,function(t,e,i){function n(){e.call(this),this._tag="g",this._boundingBox=null,this.transition=new i(this),this._drawStartPos="center"}n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" common_SVGWidget",n.prototype.move=function(t,e){var i=this.pos.apply(this,arguments);return arguments.length&&(e?this._element.transition().duration(e):this._element).attr("transform","translate("+t.x+" "+t.y+")"),i},n.prototype.size=function(t){var i=e.prototype.size.apply(this,arguments);return arguments.length&&(this._boundingBox=null),i},n.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);if(this._parentRelativeDiv)switch(this._parentRelativeDiv.style({width:this._size.width+"px",height:this._size.height+"px"}),this._drawStartPos){case"origin":this.pos({x:0,y:0});break;case"center":default:this.pos({x:this._size.width/2,y:this._size.height/2})}return this._parentElement.attr("width",this._size.width).attr("height",this._size.height),i},n.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e&&this._target.__data__.id!==e.__data__.id)throw"Target can only be assigned once.";return this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target instanceof SVGElement?(this._parentElement=t.select(this._target),this._parentWidget=this._parentElement.datum(),this._parentWidget&&this._parentWidget._id!==this._id||(this._parentWidget=this.locateParentWidget(this._target.parentNode)),
this._parentOverlay=this.locateOverlayNode()):this._target?(this._parentRelativeDiv=t.select(this._target).append("div").style({position:"relative"}),this._parentElement=this._parentRelativeDiv.append("svg").style({position:"absolute",top:0,left:0}),this._parentOverlay=this._parentRelativeDiv.append("div").style({position:"absolute",top:0,left:0}),this.resize(this._size)):this.exit(),this},n.prototype.enter=function(t,i){e.prototype.enter.apply(this,arguments)},n.prototype.update=function(t,i){e.prototype.update.apply(this,arguments)},n.prototype.postUpdate=function(t,i){e.prototype.postUpdate.apply(this,arguments),"origin"===this._drawStartPos&&this._target instanceof SVGElement?this._element.attr("transform","translate("+(this._pos.x-this._size.width/2)+","+(this._pos.y-this._size.height/2)+")scale("+this._scale+")"):this._element.attr("transform","translate("+this._pos.x+","+this._pos.y+")scale("+this._scale+")")},n.prototype.exit=function(t,i){this._parentRelativeDiv&&(this._parentOverlay.remove(),this._parentElement.remove(),this._parentRelativeDiv.remove()),e.prototype.exit.apply(this,arguments)},n.prototype.getOffsetPos=function(){var t={x:0,y:0};return this._parentWidget?(t=this._parentWidget.getOffsetPos(),t.x+=this._pos.x,t.y+=this._pos.y,t):t},n.prototype.getBBox=function(t,e){if(t||null===this._boundingBox){var i=this._element.node();i instanceof SVGElement&&(this._boundingBox=i.getBBox())}return null===this._boundingBox?{x:0,y:0,width:0,height:0}:{x:(e?Math.round(this._boundingBox.x):this._boundingBox.x)*this._scale,y:(e?Math.round(this._boundingBox.y):this._boundingBox.y)*this._scale,width:(e?Math.round(this._boundingBox.width):this._boundingBox.width)*this._scale,height:(e?Math.round(this._boundingBox.height):this._boundingBox.height)*this._scale}},n.prototype.intersection=function(t,e){return this.intersectRect(t,e)};var o=function(t,e,i){return{x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}},r=function(t,e,i,n){var o={type:"",points:[]},r=(n.x-i.x)*(t.y-i.y)-(n.y-i.y)*(t.x-i.x),s=(e.x-t.x)*(t.y-i.y)-(e.y-t.y)*(t.x-i.x),a=(n.y-i.y)*(e.x-t.x)-(n.x-i.x)*(e.y-t.y);if(0!==a){var h=r/a,l=s/a;h>=0&&1>=h&&l>=0&&1>=l?(o.type="Intersection",o.points.push({x:t.x+h*(e.x-t.x),y:t.y+h*(e.y-t.y)})):o.type="No Intersection"}else 0===r||0===s?o.type="Coincident":o.type="Parallel";return o};n.prototype.intersectRect=function(t,e){var i=this.getOffsetPos(),n=this.getBBox();if(t.x===e.x&&t.y===e.y)return t;var o={x:i.x-n.width/2,y:i.y-n.height/2},s={x:i.x+n.width/2,y:i.y-n.height/2},a={x:i.x+n.width/2,y:i.y+n.height/2},h={x:i.x-n.width/2,y:i.y+n.height/2},l=r(o,s,t,e);return l.points.length?{x:l.points[0].x,y:l.points[0].y}:(l=r(s,a,t,e),l.points.length?{x:l.points[0].x,y:l.points[0].y}:(l=r(a,h,t,e),l.points.length?{x:l.points[0].x,y:l.points[0].y}:(l=r(h,o,t,e),l.points.length?{x:l.points[0].x,y:l.points[0].y}:null)))};var s=function(t,e,i,n){var r={type:"",points:[]},s=(n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y),a=2*((n.x-i.x)*(i.x-t.x)+(n.y-i.y)*(i.y-t.y)),h=t.x*t.x+t.y*t.y+i.x*i.x+i.y*i.y-2*(t.x*i.x+t.y*i.y)-e*e,l=a*a-4*s*h;if(0>l)r.type="Outside";else if(0===l)r.type="Tangent";else{var p=Math.sqrt(l),c=(-a+p)/(2*s),u=(-a-p)/(2*s);(0>c||c>1)&&(0>u||u>1)?0>c&&0>u||c>1&&u>1?r.type="Outside":r.type="Inside":(r.type="Intersection",c>=0&&1>=c&&r.points.push(o(i,n,c)),u>=0&&1>=u&&r.points.push(o(i,n,u)))}return r};return n.prototype.intersectCircle=function(t,e){var i=this.getOffsetPos(),n=this.radius(),o=s(i,n,t,e);return o.points.length?{x:o.points[0].x,y:o.points[0].y}:null},n.prototype.distance=function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))},n.prototype._pushMarkers=function(t,e){this.svgMarkerGlitch&&(t=t||this._element,t.selectAll("path[marker-start],path[marker-end]").attr("fixme-start",function(t){return this.getAttribute("marker-start")}).attr("fixme-end",function(t){return this.getAttribute("marker-end")}).attr("marker-start",null).attr("marker-end",null))},n.prototype._popMarkers=function(t,e){this.svgMarkerGlitch&&(t=t||this._element,t.selectAll("path[fixme-start],path[fixme-end]").attr("marker-start",function(t){return this.getAttribute("fixme-start")}).attr("marker-end",function(t){return this.getAttribute("fixme-end")}).attr("fixme-start",null).attr("fixme-end",null))},n.prototype._popMarkersDebounced=e.prototype.debounce(function(t,e){this.svgMarkerGlitch&&this._popMarkers(t,e)},250),n.prototype._fixIEMarkers=function(t,e){this.svgMarkerGlitch&&(this._pushMarkers(t,e),this._popMarkersDebounced(t,e))},n}),"function"==typeof define&&define.amd&&define("css",[],function(){return{load:function(t,e,i){i()}}}),function(t,e){"function"==typeof define&&define.amd?define("common/Text.js",["./SVGWidget","css!./Text"],e):t.common_Text=e(t.common_SVGWidget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" common_Text",e.prototype.publish("text","","string","Display Text",null,{tags:["Basic"]}),e.prototype.publish("fontFamily",null,"string","Font Family",null,{tags:["Intermediate"],optional:!0}),e.prototype.publish("fontSize",null,"number","Font Size (px)",null,{tags:["Intermediate"]}),e.prototype.publish("anchor","middle","set","Anchor Position",["start","middle","end"],{tags:["Intermediate"]}),e.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Basic"]}),e.prototype.publish("rotation",0,"number","Degrees of rotation",null,{tags:["Basic"]}),e.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._textElement=i.append("text")},e.prototype.update=function(e,i){t.prototype.update.apply(this,arguments);var n=this;this._textElement.attr("font-family",this.fontFamily()).attr("font-size",this.fontSize());var o=this.text().split("\n"),r=this._textElement.selectAll("tspan").data(o);r.enter().append("tspan").attr("class",function(t,e){return"tspan_"+e}).attr("dy","1em").attr("x","0"),r.style("fill",this.colorFill()).text(function(t){return t}),r.exit().remove();var s={width:0,height:0};try{s=this._textElement.node().getBBox()}catch(a){}var h=-(s.x+s.width/2),l=-(s.y+s.height/2);switch(this.anchor()){case"start":h=-s.x+s.width/2;break;case"end":h=s.x+s.width/2}var p=-this.rotation()*Math.PI/180;h=-1*Math.abs(h*Math.cos(p)+l*Math.sin(p)),l=-1*Math.abs(h*Math.sin(p)+l*Math.cos(p)),this._textElement.style("text-anchor",this.anchor()).attr("transform",function(t){return"translate("+h+","+l+")rotate("+n.rotation()+")"})},e}),function(t,e){"function"==typeof define&&define.amd?define("common/FAChar",["./SVGWidget","./Text","css!font-awesome","css!./FAChar"],e):t.common_FAChar=e(t.common_SVGWidget,t.common_Text)}(this,function(t,e){function i(){t.call(this),this._text=(new e).fontFamily("FontAwesome")}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" common_FAChar",i.prototype.publish("char","","string","Font Awesome Item",null,{tags:["Private"]}),i.prototype.publish("fontSize",null,"number","Font Size",null,{tags:["Private"]}),i.prototype.publishProxy("text_colorFill","_text","colorFill"),i.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._text.target(e)},i.prototype.update=function(e,i){t.prototype.update.apply(this,arguments),this._text.text(this["char"]()).scale((this.fontSize()||14)/14).render()},i.prototype.exit=function(e,i){this._text.target(null),t.prototype.exit.apply(this,arguments)},i}),function(t,e){"function"==typeof define&&define.amd?define("common/HTMLWidget.js",["d3","./Widget","./Transition"],e):t.common_HTMLWidget=e(t.d3,t.common_Widget,t.common_Transition)}(this,function(t,e,i){function n(){e.call(this),this._drawStartPos="origin",this._boundingBox=null}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" common_HTMLWidget",n.prototype.calcFrameWidth=function(t){var e=parseFloat(t.style("padding-left"))+parseFloat(t.style("padding-right"))+parseFloat(t.style("margin-left"))+parseFloat(t.style("margin-right"))+parseFloat(t.style("border-left-width"))+parseFloat(t.style("border-right-width"));return e},n.prototype.calcWidth=function(t){return parseFloat(t.style("width"))-this.calcFrameWidth(t)},n.prototype.calcFrameHeight=function(t){var e=parseFloat(t.style("padding-top"))+parseFloat(t.style("padding-bottom"))+parseFloat(t.style("margin-top"))+parseFloat(t.style("margin-bottom"))+parseFloat(t.style("border-top-width"))+parseFloat(t.style("border-bottom-width"));return e},n.prototype.calcHeight=function(t){return parseFloat(t.style("height"))+this.calcFrameHeight(t)},n.prototype.hasHScroll=function(t){return t=t||this._element,t.property("scrollWidth")>t.property("clientWidth")},n.prototype.hasVScroll=function(t){return t=t||this._element,t.property("scrollHeight")>t.property("clientHeight")},n.prototype.clientWidth=function(){return this._size.width-this.calcFrameWidth(this._element)},n.prototype.clientHeight=function(){return this._size.height-this.calcFrameHeight(this._element)},n.prototype.getBBox=function(t,e){if(t||null===this._boundingBox){var i=this._element.node()?this._element.node().firstElementChild:null;if(i instanceof Element){var n=i.getBoundingClientRect();this._boundingBox={x:n.left,y:n.top,width:n.width,height:n.height}}}return null===this._boundingBox?{x:0,y:0,width:0,height:0}:{x:(e?Math.round(this._boundingBox.x):this._boundingBox.x)*this._scale,y:(e?Math.round(this._boundingBox.y):this._boundingBox.y)*this._scale,width:(e?Math.round(this._boundingBox.width):this._boundingBox.width)*this._scale,height:(e?Math.round(this._boundingBox.height):this._boundingBox.height)*this._scale}},n.prototype.resize=function(t){var i=e.prototype.resize.apply(this,arguments);return this._parentElement.style("width",this._size.width+"px").style("height",this._size.height+"px"),i},n.prototype.target=function(e){if(!arguments.length)return this._target;if(this._target&&e)throw"Target can only be assigned once.";if(this._target=e,("string"==typeof this._target||this._target instanceof String)&&(this._target=document.getElementById(this._target)),this._target instanceof SVGElement){var i=this.locateOverlayNode();this._parentElement=i.append("div").style({position:"absolute",top:0,left:0,overflow:"hidden"}),this._overlayElement=t.select(this._target);var n=this;this.oldPos=null,this.observer=new this.MutationObserver(function(t){n.syncOverlay()});for(var o=this._overlayElement.node();o;)this.observer.observe(o,{attributes:!0}),o=o.parentNode}else if(this._target){if(this._parentElement=t.select(this._target),!this._size.width&&!this._size.height){var r=parseFloat(this._parentElement.style("width")),s=parseFloat(this._parentElement.style("height"));this.size({width:r,height:s})}this._parentElement=t.select(this._target).append("div")}else this.exit();return this},n.prototype.postUpdate=function(t,i){if(e.prototype.postUpdate.apply(this,arguments),"origin"===this._drawStartPos)this._element.style({position:"relative",left:this._pos.x+"px",top:this._pos.y+"px"});else{var n=this.getBBox(!0);this._element.style({position:"relative","float":"left",left:this._pos.x+(this._size.width-n.width)/2+"px",top:this._pos.y+(this._size.height-n.height)/2+"px"})}},n.prototype.exit=function(t,i){this.observer&&this.observer.disconnect(),this.oldPos=null,this._parentElement&&this._parentElement.remove(),e.prototype.exit.apply(this,arguments)},n}),function(t,e){"function"==typeof define&&define.amd?define("common/Shape.js",["d3","./SVGWidget","css!./Shape"],e):t.common_Shape=e(t.d3,t.common_SVGWidget)}(this,function(t,e){function i(){e.call(this)}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_Shape",i.prototype.publish("shape","circle","set","Shape Type",["circle","square","rect","ellipse"],{tags:["Private"]}),i.prototype.publish("width",24,"number","Width",null,{tags:["Private"]}),i.prototype.publish("height",24,"number","Height",null,{tags:["Private"]}),i.prototype.publish("colorStroke",null,"html-color","Stroke Color",null,{tags:["Private"]}),i.prototype.publish("colorFill",null,"html-color","Fill Color",null,{tags:["Private"]}),i.prototype.publish("radius",null,"number","Radius",null,{tags:["Private"]}),i.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),i.prototype._origRadius=i.prototype.radius,i.prototype.radius=function(t){var e=i.prototype._origRadius.apply(this,arguments);return arguments.length?(this.width(t),this.height(t),e):Math.max(this.width(),this.height())/2},i.prototype.intersection=function(t,i){switch(this.shape()){case"circle":return this.intersectCircle(t,i)}return e.prototype.intersection.apply(this,arguments)},i.prototype.update=function(e,i){var n=i.selectAll("rect,circle,ellipse").data([this.shape()],function(t){return t}),o=this;n.enter().append("square"===this.shape()?"rect":this.shape()).attr("class","common_Shape").each(function(e){var i=t.select(this);o._tooltipElement=i.append("title")}),n.style("fill",this.colorFill()).style("stroke",this.colorStroke()).each(function(e){var i=t.select(this);switch(o._tooltipElement.text(o.tooltip()),o.shape()){case"circle":var n=o.radius();i.attr("r",n);break;case"square":var r=Math.max(o.width(),o.height());i.attr("x",-r/2).attr("y",-r/2).attr("width",r).attr("height",r);break;case"rect":i.attr("x",-o.width()/2).attr("y",-o.height()/2).attr("width",o.width()).attr("height",o.height());break;case"ellipse":i.attr("rx",o.width()/2).attr("ry",o.height()/2)}}),n.exit().remove()},i}),function(t,e){"function"==typeof define&&define.amd?define("common/Icon",["./SVGWidget","./Shape","./FAChar","css!./Icon"],e):t.common_Icon=e(t.common_SVGWidget,t.common_Shape,t.common_FAChar)}(this,function(t,e,i){function n(){t.call(this),this._shapeWidget=new e,this._faChar=new i}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" common_Icon",n.prototype.publish("shape","circle","set","Shape Type",["circle","square"],{tags:["Private"]}),n.prototype.publishProxy("faChar","_faChar","char"),n.prototype.publishProxy("image_colorFill","_faChar","text_colorFill"),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype.publish("diameter",24,"number","Diameter",null,{tags:["Private"]}),n.prototype.publish("paddingPercent",45,"number","Padding Percent",null,{tags:["Private"]}),n.prototype.publishProxy("shape_colorFill","_shapeWidget","colorFill"),n.prototype.publishProxy("shape_colorStroke","_shapeWidget","colorStroke"),n.prototype.intersection=function(t,e){return this._shapeWidget.intersection(t,e)},n.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._shapeWidget.target(e).render(),this._faChar.target(e).render(),this._tooltipElement=i.append("title");var n=this;i.on("click",function(t){n.click(t)})},n.prototype.click=function(t){console.log("Clicked the icon")},n.prototype.update=function(e,i){t.prototype.update.apply(this,arguments),this._faChar.fontSize(this.diameter()*(100-this.paddingPercent())/100).render(),this._shapeWidget.shape(this.shape()).width(this.diameter()).height(this.diameter()).render(),this._tooltipElement.text(this.tooltip())},n.prototype.exit=function(e,i){t.prototype.exit.apply(this,arguments),this._shapeWidget.target(null),this._faChar.target(null)},n}),function(t,e){"function"==typeof define&&define.amd?define("common/IList",[],e):t.common_IList=e()}(this,function(){function t(){}return t.prototype.click=function(t){console.log("Click:  "+t)},t}),function(t,e){"function"==typeof define&&define.amd?define("common/IMenu",[],e):t.common_IMenu=e()}(this,function(){function t(){}return t.prototype.click=function(t){console.log("Click:  "+t)},t.prototype.preShowMenu=function(){console.log("preShowMenu")},t.prototype.postHideMenu=function(t){console.log("postHideMenu")},t}),function(t,e){"function"==typeof define&&define.amd?define("common/TextBox.js",["./SVGWidget","./Shape","./Text","css!./TextBox"],e):t.common_TextBox=e(t.common_SVGWidget,t.common_Shape,t.common_Text)}(this,function(t,e,i){function n(){t.call(this),this._shape=(new e).shape("rect"),this._text=new i}return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype._class+=" common_TextBox",n.prototype.publishProxy("text","_text"),n.prototype.publishProxy("shape_colorStroke","_shape","colorStroke"),n.prototype.publishProxy("shape_colorFill","_shape","colorFill"),n.prototype.publishProxy("text_colorFill","_text","colorFill"),n.prototype.publish("paddingLeft",4,"number","Padding:  Left",null,{tags:["Private"]}),n.prototype.publish("paddingRight",4,"number","Padding:  Right",null,{tags:["Private"]}),n.prototype.publish("paddingTop",4,"number","Padding:  Top",null,{tags:["Private"]}),n.prototype.publish("paddingBottom",4,"number","Padding:  Bottom",null,{tags:["Private"]}),n.prototype.publishProxy("anchor","_text"),n.prototype.publish("fixedSize",null),n.prototype.publish("tooltip","","string","Tooltip",null,{tags:["Private"]}),n.prototype.padding=function(t){return this.paddingLeft(t),this.paddingRight(t),this.paddingTop(t),this.paddingBottom(t),this},n.prototype.enter=function(e,i){t.prototype.enter.apply(this,arguments),this._tooltipElement=i.append("title"),this._shape.target(e).render(),this._text.target(e).render()},n.prototype.update=function(e,i){t.prototype.update.apply(this,arguments),this._tooltipElement.text(this.tooltip()),this._text.render();var n=this._text.getBBox(!0),o={width:this.fixedSize()?this.fixedSize().width:n.width+this.paddingLeft()+this.paddingRight(),height:this.fixedSize()?this.fixedSize().height:n.height+this.paddingTop()+this.paddingBottom()};if(this._shape.width(o.width).height(o.height).render(),this.fixedSize())switch(this.anchor()){case"start":this._text.x(-this.fixedSize().width/2+n.width/2+(this.paddingLeft()+this.paddingRight())/2).render();break;case"end":this._text.x(this.fixedSize().width/2-n.width/2-(this.paddingLeft()+this.paddingRight())/2).render()}},n.prototype.exit=function(e,i){this._shape.target(null),this._text.target(null),t.prototype.exit.apply(this,arguments)},n}),function(t,e){"function"==typeof define&&define.amd?define("common/List",["d3","../common/SVGWidget","./IList","../common/TextBox","css!./List"],e):t.common_List=e(t.d3,t.common_SVGWidget,t.common_IList,t.common_TextBox)}(this,function(t,e,i,n){function o(t){e.call(this),i.call(this),this._listWidgets={}}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" common_List",o.prototype["implements"](i.prototype),o.prototype.publish("anchor","start","set","Anchor Position",["","start","middle","end"],{tags:["Private"]}),o.prototype.update=function(t,i){e.prototype.update.apply(this,arguments);var o=this,r=i.selectAll(".line").data(this.data(),function(t){return t});r.enter().append("g").attr("class","line").each(function(t){var e=(new n).target(this).paddingTop(0).paddingBottom(0).paddingLeft(8).paddingRight(8).text(t).render();e.element().on("click",function(t){o.click(t.text())}),o._listWidgets[t]=e});var s=0,a=0,h=0;for(var l in this._listWidgets)if(this._listWidgets.hasOwnProperty(l)){var p=this._listWidgets[l].getBBox();s+=p.height,a<p.width&&(a=p.width),++h}var c=-s/2;r.each(function(t){var e=o._listWidgets[t],i=e.getBBox();e.pos({x:0,y:c+i.height/2}).anchor(o.anchor()).fixedSize({width:a,height:i.height}).render(),c+=i.height}),r.exit().remove().each(function(t){o._listWidgets[t].target(null),delete o._listWidgets[t]})},o.prototype.exit=function(t,i){for(var n in this._listWidgets)this._listWidgets[n].target(null);e.prototype.exit.apply(this,arguments)},o}),function(t,e){"function"==typeof define&&define.amd?define("common/Menu",["d3","./SVGWidget","./IMenu","./Icon","./List","css!./Menu"],e):t.common_Menu=e(t.d3,t.common_SVGWidget,t.common_IMenu,t.common_Icon,t.common_List)}(this,function(t,e,i,n,o){function r(){e.call(this),i.call(this),this._icon=(new n).shape("square").diameter(14),this._list=new o;var r=this;this._list.click=function(e){t.event.stopPropagation(),r.hideMenu(),r.click(e)},this._open=!1}return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype._class+=" common_Menu",r.prototype["implements"](i.prototype),r.prototype.publishProxy("faChar","_icon",null,""),r.prototype.publishProxy("paddingPercent","_icon",null,10),r.prototype.toggleMenu=function(){this._open?this.hideMenu():this.showMenu()},r.prototype.showMenu=function(){this.preShowMenu(),this._open=!0,this._list.data(this.data()).render();var e=this._icon.getBBox(!0),i=this._list.getBBox(!0),n={x:e.width/2-i.width/2,y:e.height/2+i.height/2};this._list.move(n);var o=this;t.select("body").on("click."+this._id,function(){console.log("click:  body - "+o._id),o._open&&o.hideMenu()})},r.prototype.hideMenu=function(){t.select("body").on("click."+this._id,null),this._open=!1,this._list.data([]).render(),this.postHideMenu()},r.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments),this._icon.target(i).render(),this._list.target(i).render();var o=this;this._icon.element().on("click",function(e){t.event.stopPropagation(),o.toggleMenu()})},r.prototype.update=function(t,i){e.prototype.update.apply(this,arguments),i.classed("disabled",0===this.data().length),this._icon.faChar(this.faChar()).paddingPercent(this.paddingPercent()).render()},r.prototype.exit=function(t,i){this._icon.target(null),this._list.target(null),e.prototype.exit.apply(this,arguments)},r}),function(t,e){"function"==typeof define&&define.amd?define("common/Palette.js",["d3","colorbrewer"],e):t.common_Palette=e(t.d3)}(this,function(t){function e(t,e){if(!t)return i();var n=h[t];return n||(n=i(t,e),h[t]=n),n}function i(n,o){function l(t){return p(t)}if(!n)return["default"].concat(r.concat(s).concat(a));var p=null;if(o)p=t.scale.ordinal().range(o);else{if(r.indexOf(n)>=0)p=new t.scale[n];else if(a.indexOf(n)>=0){var c=[];switch(n){case"hpcc10":var u=i("default").colors();c=u.filter(function(t,e){return e%2?!0:!1});break;case"hpcc20":c=i("category10").colors().concat(i("hpcc10").colors())}p=t.scale.ordinal().range(c)}else if(s.indexOf(n)>0)for(var d=12;d>0;){if(colorbrewer[n][d]){p=t.scale.ordinal().range(colorbrewer[n][d]);break}--d}p||(p=t.scale.category20()),o=p.range()}return l.type=function(){return"ordinal"},l.id=function(t){return arguments.length?(n=t,l):n},l.colors=function(t){return arguments.length?(o=t,l):o},l.clone=function(t){return h[t]=i(t,this.colors()),h[t]},l.cloneNotExists=function(t){return h[t]?h[t]:this.clone(t)},l["switch"]=function(t,i){return n===t?this:arguments.length?e(t,i):e()},l}function n(t,e,i){if(!t)return o();var n=l[t];return n||(n=o(t,e),l[t]=n),n}function o(e,i,r){function a(t,e,i){return c.domain([e,i])(t)}if(!arguments.length){var h=["default"];for(var p in colorbrewer)-1===s.indexOf(p)&&h.push(p);return h}var c=null,u=i,d=function(e,i){i=i||32;var n=Math.ceil(i/(e.length-1)),o=[],r=null;return e.forEach(function(e){if(r)for(var i=t.scale.linear().domain([0,n]).range([r,e]).interpolate(t.interpolateLab),s=0;n>s;++s)o.push(i(s));r=e}),c=t.scale.quantize().domain([0,100]).range(o)};if(i)c=d(i,r);else{if(colorbrewer[e])for(var f=12;f>0;){if(colorbrewer[e][f]){c=d(colorbrewer[e][f]);break}--f}c||(c=d(colorbrewer.RdYlGn[11])),u=c.range()}return a.type=function(){return"rainbow"},a.id=function(t){return arguments.length?(e=t,a):e},a.colors=function(t){return arguments.length?(u=t,a):u},a.clone=function(t){return l[t]=o(t,this.color()),l[t]},a.cloneNotExists=function(t){return l[t]?l[t]:this.clone(t)},a["switch"]=function(t,i){return e===t?this:arguments.length?n(t,i):n()},a}var r=["category10","category20","category20b","category20c"],s=["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3"],a=["hpcc10","hpcc20"],h={},l={},p=function(e,n,r,s,a){t.select(e).selectAll(".palette").data(i(),function(t){return t}).enter().append("span").attr("class","palette").attr("title",function(t){return t}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch").data(function(t){return i(t).colors()}).enter().append("span").attr("class","swatch").style("background-color",function(t){return t}),t.select(n).selectAll(".palette").data(o(),function(t){return t}).enter().append("span").attr("class","palette").attr("title",function(t){return t}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch2").data(function(t){return o(t).colors()}).enter().append("span").attr("class","swatch2").style("height","8px").style("background-color",function(t){return t});var h={id:s.join("_")+a,scale:o("custom",s,a)};t.select(r).selectAll(".palette").data([h],function(t){return t.id}).enter().append("span").attr("class","palette").attr("title",function(t){return"aaa"}).on("click",function(e){console.log(t.values(e.value).map(JSON.stringify).join("\n"))}).selectAll(".swatch2").data(function(t){for(var e=[],i=0;255>=i;++i)e.push(h.scale(i,0,255));return e}).enter().append("span").attr("class","swatch2").style("background-color",function(t){return t})};return{ordinal:e,rainbow:n,test:p}}),function(t,e){"function"==typeof define&&define.amd?define("common/Surface.js",["d3","./SVGWidget","./Icon","./Shape","./Text","./FAChar","./Menu","css!./Surface"],e):t.common_Surface=e(t.d3,t.common_SVGWidget,t.common_Icon,t.common_Shape,t.common_Text,t.common_FAChar,t.common_Menu)}(this,function(t,e,i,n,o,r,s){function a(){e.call(this),this._icon=(new i).faChar("").paddingPercent(50),this._container=(new n)["class"]("container").shape("rect"),this._titleRect=(new n)["class"]("title").shape("rect"),this._text=(new o)["class"]("title"),this._menu=(new s).paddingPercent(0);var t=this;this._menu.preShowMenu=function(){t.content()&&t.content().hasOverlay()&&t.content().visible(!1)},this._menu.postHideMenu=function(){t.content()&&t.content().hasOverlay()&&t.content().visible(!0)},this._surfaceButtons=[]}return a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.prototype._class+=" common_Surface",a.prototype.publish("showTitle",!0,"boolean","Show Title",null,{tags:["Basic"]}),a.prototype.publish("title","","string","Title",null,{tags:["Basic"]}),a.prototype.publishProxy("titleFontSize","_text","fontSize"),a.prototype.publish("showIcon",!0,"boolean","Show Title",null,{tags:["Advanced"]}),a.prototype.publishProxy("icon_faChar","_icon","faChar"),a.prototype.publishProxy("icon_shape","_icon","shape"),a.prototype.publish("content",null,"widget","Content",null,{tags:["Private"]}),a.prototype.publish("buttonAnnotations",[],"array","Button Array",null,{tags:["Intermediate"]}),a.prototype.publish("buttonGutter",25,"number","Space Between Menu and Buttons",null,{tags:["Intermediate"]}),a.prototype.publish("showContent",!0,"boolean","Show Content",null,{tags:["Intermediate"]}),a.prototype.publish("menu",[],"array","Menu List Data",null,{tags:["Intermediate"]}),a.prototype.publish("menuPadding",2,"number","Menu Padding",null,{tags:["Advanced"]}),a.prototype._origMenuParam=a.prototype.menu,a.prototype.menu=function(t){return a.prototype._origMenuParam.apply(this,arguments),arguments.length?(this._menu.data(t),this):this._menu.data()},a.prototype._origShowContent=a.prototype.showContent,a.prototype.showContent=function(t){var e=a.prototype._origShowContent.apply(this,arguments);return arguments.length&&this.content()&&this.content().visible(this.showContent()),e},a.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments);var o=n.append("g").attr("class","frame"),r=o.node();this._clipRect=o.append("defs").append("clipPath").attr("id",this.id()+"_clip").append("rect").attr("x",0).attr("y",0).attr("width",this._size.width).attr("height",this._size.height),this._titleRect.target(r).render().display(this.showTitle()&&this.showIcon()),this._icon.target(r).render(),this._menu.target(i),this._text.target(r),this._container.target(r),this.buttonContainer=t.select(this._target).append("div").attr("class","svg-button-container")},a.prototype.update=function(i,n){e.prototype.update.apply(this,arguments);var o=this,r=this.width()-1,s=this.height()-1;this._icon.display(this.showTitle()&&this.showIcon()).shape(this.icon_shape()).render(),this._menu.render(),this._text.text(this.title()).display(this.showTitle()).render();var a=this.buttonContainer.selectAll(".surface-button").data(this.buttonAnnotations());a.enter().append("button").attr("class","surface-button").each(function(e,i){var n=o._surfaceButtons[i]=t.select(this).attr("class","surface-button "+(e["class"]?e["class"]:"")).attr("id",e.id).style("padding",e.padding).style("width",e.width).style("height",e.height).style("cursor","pointer").on("click",function(t){o.click(t)});"FontAwesome"===e.font?n.append("i").attr("class","fa").text(function(t){return e.label}):n.text(function(t){return e.label})}),a.exit().each(function(e,i){var n=t.select(this);delete o._surfaceButtons[i],n.remove()});var h=this.showTitle()?Math.max.apply(null,this._surfaceButtons.map(function(t){return t.node().offsetHeight})):0,l=this.showTitle()&&this.showIcon()?this._icon.getBBox(!0):{width:0,height:0},p=this._text.getBBox(!0),c=this._menu.getBBox(!0),u=Math.max(l.height,p.height,c.height,h),d=this.showTitle()?u:0,f=(-s+u)/2,y=this.showTitle()?Math.max(p.height,c.height,h):0,g=y>=d?0:(d-y)/2,m=g;this._titleRect.pos({x:m,y:f}).width(r-2*m).height(y).display(this.showTitle()).render(),this._icon.move({x:-r/2+l.width/2,y:f}),this._menu.move({x:r/2-c.width/2-this.menuPadding(),y:f}),this._text.move({x:(l.width/2-c.width/2)/2,y:f});var _=o._titleRect.node().getBoundingClientRect().left+(o._size.width-2*m)-o.buttonGutter()-this.buttonContainer.node().offsetWidth,v=o._titleRect.node().getBoundingClientRect().top+(y-this.buttonContainer.node().offsetHeight)/2;if(isNaN(_)||this.buttonContainer.style("left",_+"px"),isNaN(v)||this.buttonContainer.style("top",v+"px"),this.showTitle()?this._container.pos({x:m/2,y:d/2-g/2}).width(r-m).height(s-d+g).render():this._container.pos({x:0,y:0}).width(r).height(s).render(),this.showContent()){var x=m,b=d-g,w=n.selectAll(".content").data(this.content()?[this.content()]:[],function(t){return t._id});w.enter().append("g").attr("class","content").attr("clip-path","url(#"+this.id()+"_clip)").each(function(t){t.target(this)}),w.attr("transform","translate("+m/2+", "+(d/2-g/2)+")").each(function(t){var e={left:0,top:0,right:1,bottom:1};t.resize({width:r-x-(e.left+e.right),height:s-b-(e.top+e.bottom)})}),this.content()&&this._clipRect.attr("x",-(r-x)/2).attr("y",-(s-b)/2).attr("width",r-x).attr("height",s-b),w.exit().transition().each(function(t){t.target(null)}).remove()}this._menu.element()&&this._menu.element().node()&&this._menu.element().node().parentNode&&this._menu.element().node().parentNode.appendChild(this._menu.element().node())},a.prototype.exit=function(t,i){this._titleRect.target(null),this._icon.target(null),this._menu.target(null),this._text.target(null),this._container.target(null),this.content()&&this.content().target(null),e.prototype.exit.apply(this,arguments)},a.prototype.intersection=function(t,e){var i=[],n=this._icon.intersection(t,e,this._pos);n&&i.push({i:n,d:this.distance(n,e)});var o=this._titleRect.intersection(t,e);o&&i.push({i:o,d:this.distance(o,e)});var r=this._container.intersection(t,e);r&&i.push({i:r,d:this.distance(r,e)});var s=null;return i.forEach(function(t){(null===s||s.d>t.d)&&(s=t)}),s&&s.i?s.i:null},a.prototype.click=function(t,e){console.log("Clicked: "+t.id)},a}),function(t,e){"function"==typeof define&&define.amd?define("common/ResizeSurface.js",["d3","./Surface","css!./ResizeSurface"],e):t.common_ResizeSurface=e(t.d3,t.common_Surface)}(this,function(t,e){function i(){e.call(this),this.handleWidth=8,this.handles=[{loc:"NW"},{loc:"N"},{loc:"NE"},{loc:"E"},{loc:"SE"},{loc:"S"},{loc:"SW"},{loc:"W"}];var i=this;this.dispatch=t.dispatch("sizestart","size","sizeend"),this.drag=t.behavior.drag().origin(function(t){return t}).on("dragstart",function(e){
i.dispatch.sizestart(i,e.loc),i.allowResize()&&(t.event.sourceEvent.stopPropagation(),i._dragHandlePos={x:e.x,y:e.y},i._dragStartPos=i.pos(),i._dragStartSize=i.size(),i._prevPosSize={x:i._dragStartPos.x,y:i._dragStartPos.y,width:i._dragStartSize.width,height:i._dragStartSize.height},i._textPosSize=i._text.getBBox(!0),i._iconPosSize=i._icon.getBBox(!0),i.showContent(!1))}).on("drag",function(e){if(i.allowResize()){t.event.sourceEvent.stopPropagation();var n=t.event.x-i._dragHandlePos.x,o=t.event.y-i._dragHandlePos.y,r={x:0,y:0,w:0,h:0};switch(e.loc){case"NW":r.x=n/2,r.w=-n;case"N":r.y=o/2,r.h=-o;break;case"NE":r.y=o/2,r.h=-o;case"E":r.x=n/2,r.w=n;break;case"SE":r.x=n/2,r.w=n;case"S":r.y=o/2,r.h=o;break;case"SW":r.y=o/2,r.h=o;case"W":r.x=n/2,r.w=-n}var s={x:i._dragStartPos.x+r.x,y:i._dragStartPos.y+r.y,width:i._dragStartSize.width+r.w,height:i._dragStartSize.height+r.h};s.width<2*i._iconPosSize.width+i._textPosSize.width&&(s.x=i._prevPosSize.x,s.width=i._prevPosSize.width),s.height<i._textPosSize.height+48&&(s.y=i._prevPosSize.y,s.height=i._prevPosSize.height),i.pos({x:s.x,y:s.y},!1,!1).size({width:s.width,height:s.height}).render().getBBox(!0),i.dispatch.size(i,e.loc),i._prevPosSize=s}}).on("dragend",function(e){i.allowResize()&&(t.event.sourceEvent.stopPropagation(),i.showContent(!0).render(),i._container.getBBox(!0),i._titleRect.getBBox(!0),i.dispatch.sizeend(i,e.loc))})}return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" common_ResizeSurface",i.prototype.publish("allowResize",!0,"boolean","Sets if surface can be resized",null,{tags:["Private","Shared"]}),i.prototype.move=function(t){var i=e.prototype.move.apply(this,arguments);return this.updateHandles(this._domNode,this._element),i},i.prototype.update=function(t,i){e.prototype.update.apply(this,arguments),this.updateHandles(t,i)},i.prototype.updateHandles=function(e,i){var n=this._parentElement.selectAll("rect").data(this.handles,function(t){return t.loc});n.enter().append("rect").attr("class",function(t){return"resize"+t.loc}).call(this.drag);var o=this._pos.x+this._container._pos.x-this._container.width()/2,r=this._pos.y+this._titleRect._pos.y-this._titleRect.height()/2,s=this._pos.x+this._container._pos.x+this._container.width()/2,a=this._pos.y+this._container._pos.y+this._container.height()/2,h=s-o,l=a-r,p=this;n.each(function(e){switch(e.loc){case"NW":e.x=o-p.handleWidth/2,e.y=r-p.handleWidth/2,e.width=p.handleWidth,e.height=p.handleWidth;break;case"N":e.x=o+p.handleWidth/2,e.y=r-p.handleWidth/2,e.width=h-p.handleWidth,e.height=p.handleWidth;break;case"NE":e.x=s-p.handleWidth/2,e.y=r-p.handleWidth/2,e.width=p.handleWidth,e.height=p.handleWidth;break;case"E":e.x=s-p.handleWidth/2,e.y=r+p.handleWidth/2,e.width=p.handleWidth,e.height=l-p.handleWidth;break;case"SE":e.x=s-p.handleWidth/2,e.y=a-p.handleWidth/2,e.width=p.handleWidth,e.height=p.handleWidth;break;case"S":e.x=o+p.handleWidth/2,e.y=a-p.handleWidth/2,e.width=h-p.handleWidth,e.height=p.handleWidth;break;case"SW":e.x=o-p.handleWidth/2,e.y=a-p.handleWidth/2,e.width=p.handleWidth,e.height=p.handleWidth;break;case"W":e.x=o-p.handleWidth/2,e.y=r+p.handleWidth/2,e.width=p.handleWidth,e.height=l-p.handleWidth}t.select(this).attr("x",e.x).attr("y",e.y).attr("width",e.width).attr("height",e.height)})},i}),function(t,e){"function"==typeof define&&define.amd?define("common/Utility.js",["d3","require","es6-promise"],e):t.common_Utility=e(t.d3,t.require)}(this,function(t,e){function i(t,e,i,n,o){var r,s,a=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,h=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,p=/^0x[0-9a-f]+$/i,c=/^0/,u=function(t){return!o&&(""+t).toLowerCase()||""+t},d=u(n?t[n]:t).replace(h,"")||"",f=u(n?e[n]:e).replace(h,"")||"",y=d.replace(a,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),g=f.replace(a,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),m=parseInt(d.match(p),16)||1!==y.length&&d.match(l)&&Date.parse(d),_=parseInt(f.match(p),16)||m&&f.match(l)&&Date.parse(f)||null;if(_){if(_>m)return"ascending"===i?-1:1;if(m>_)return"ascending"===i?1:-1}for(var v=0,x=Math.max(y.length,g.length);x>v;v++){if(r=!(y[v]||"").match(c)&&parseFloat(y[v])||y[v]||0,s=!(g[v]||"").match(c)&&parseFloat(g[v])||g[v]||0,isNaN(r)!==isNaN(s))return isNaN(r)?1:-1;if(typeof r!=typeof s&&(r+="",s+=""),s>r)return"ascending"===i?-1:1;if(r>s)return"ascending"===i?1:-1}return 0}function n(){this.items={}}function o(t){this._widgetElement=t}return n.prototype.clear=function(){for(var t in this.items)this.items[t].element().classed("selected",!1);this.items={}},n.prototype.isEmpty=function(){for(var t in this.items)return!1;return!0},n.prototype.append=function(t){this.items[t._id]=t,t.element().classed("selected",!0)},n.prototype.remove=function(t){this.items[t._id].element().classed("selected",!1),delete this.items[t._id]},n.prototype.isSelected=function(t){return void 0!==this.items[t._id]},n.prototype.get=function(){var t=[];for(var e in this.items)t.push(this.items[e]);return t},n.prototype.set=function(t){this.clear(),t.forEach(function(t,e){this.append(t)},this)},n.prototype.click=function(t,e){e.ctrlKey?this.items[t._id]?this.remove(t):this.append(t):(this.clear(),this.append(t))},o.prototype.enter=function(e,i){var n=this;e.on("click.SimpleSelection",function(e,i){var o=t.select(this),r=o.classed("selected");n._widgetElement.selectAll(".selected").classed("selected",null),r||o.classed("selected",!0)}).on("mouseover.SimpleSelection",function(e,i){t.select(this).classed("over",!0)}).on("mouseout.SimpleSelection",function(e,i){t.select(this).classed("over",null)})},o.prototype.selected=function(e){return t.select(e).classed("selected")},{naturalSort:function(t,e,n,o){return t.slice(0).sort(function(t,r){return i(t,r,e,n,o)})},multiSort:function(e,i){return e.sort(function(e,n){for(var o=0;o<i.length;++o){var r=e[i[o].idx],s=n[i[o].idx];if(r!==s)return i[o].reverse?t.descending(r,s):t.ascending(r,s)}return 0}),e},Selection:n,SimpleSelection:o,urlParams:function(){var t=window.location.search.split("?")[1],e={};return t&&t.split("&").forEach(function(t,i){var n=t.split("=");switch(n.length){case 1:e[decodeURIComponent(n[0])]=void 0;break;case 2:e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);break;default:throw"Invalid URL Param:  "+t}}),e},endsWith:function(t,e,i){var n=t.toString();("number"!=typeof i||!isFinite(i)||Math.floor(i)!==i||i>n.length)&&(i=n.length),i-=e.length;var o=n.indexOf(e,i);return-1!==o&&o===i},d3ArrayAdapter:function(t){return{ownerDocument:{createElement:function(e){return{get __data__(){return this.row},set __data__(e){this.row=t[this.index]=e}}},createElementNS:function(t,e){return this.createElement(e)}},querySelectorAll:function(e){if(e)throw"unsupported";var i=this;return t.map(function(e,n){return{ownerDocument:i.ownerDocument,parentNode:i,get __data__(){return e},set __data__(e){t[n]=e}}})},appendChild:function(e){return e.parentNode=this,e.index=t.length,t.push(null),e},insertBefore:function(e,i){var n=t.indexOf(e.__data__),o=t.indexOf(i.__data__);return n>o?t.splice(o,0,t.splice(n,1)[0]):o-1>n&&t.splice(o-1,0,t.splice(n,1)[0]),e},removeChild:function(e){return t.splice(t.indexOf(e.__data__),1),e}}},downloadBlob:function(e,i,n){n=n||"data";var o=new Date,r=t.time.format("%Y-%m-%dT%H_%M_%S"),s=r(o),a=n+"_"+s+"."+e.toLowerCase(),h="";switch(e){case"TSV":h="text/tab-seperated-values";break;case"JSON":h="application/json";break;default:h="text/csv"}var l=document.createElement("a");if(navigator.msSaveBlob)return l=null,navigator.msSaveBlob(new Blob([i],{type:h}),a);if("download"in l)return l.href="data:"+h+","+encodeURIComponent(i),l.setAttribute("download",a),document.body.appendChild(l),setTimeout(function(){l.click(),document.body.removeChild(l)},10),!0;l=null;var p=document.createElement("iframe");return document.body.appendChild(p),p.src="data:"+h+","+encodeURIComponent(i),setTimeout(function(){document.body.removeChild(p)},100),!0},requireWidget:function(t){return new Promise(function(i,n){var o=t.split("."),r="../"+o[0].split("_").join("/");e([r],function(t){i(o.length>1?t[o[1]]:t)})})}}}),function(t,e){"function"==typeof define&&define.amd?define("common/WidgetArray.js",["./Widget"],e):t.common_WidgetArray=e(t.common_Widget)}(this,function(t){function e(){t.call(this)}return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype._class+=" common_WidgetArray",e.prototype.publish("content",[],"widgetArray","Widget Array"),e.prototype.target=function(t){t||(this.content_reset(),this.exit())},e});