"function"==typeof define&&define.amd&&define("css",[],function(){return{load:function(t,e,i){i()}}}),function(t,e){"function"==typeof define&&define.amd?define("tree/CirclePacking.js",["d3","../common/SVGWidget","../api/ITree","../common/Text","../common/FAChar","css!./CirclePacking"],e):t.tree_CirclePacking=e(t.d3,t.common_SVGWidget,t.api_ITree,t.common_Text,t.common_FAChar)}(this,function(t,e,i,n,a){function o(t){e.call(this),i.call(this)}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" tree_CirclePacking",o.prototype["implements"](i.prototype),o.prototype.publish("paletteID","default","set","Palette ID",o.prototype._palette["switch"](),{tags:["Basic","Shared"]}),o.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),o.prototype.enter=function(e,i){this.diameter=Math.min(this.width(),this.height()),this.pack=t.layout.pack().size([this.diameter-4,this.diameter-4]).value(function(t){return 1}),this.svg=i.append("g").attr("transform","rotate(30)")},o.prototype.update=function(e,i){var n=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.svg.selectAll("circle").remove(),this.svg.selectAll("text").remove();var a=this.data(),o=a,r=this.pack.nodes(a);this.circle=this.svg.selectAll("circle").data(r).enter().append("circle").attr("class",function(t){return t.parent?t.children?"node":"node leaf":"node root"}).style("fill",function(t){return n._palette(t.label)}).on("click",function(t){n.click(t)}).on("dblclick",function(e){o!==e&&n.zoom(e),t.event.stopPropagation()}),this.circle.append("title").text(function(t){return t.label}),this.svg.selectAll("text").data(r).enter().append("text").attr("class","label").style("fill-opacity",function(t){return t.parent===a?1:0}).style("display",function(t){return t.parent===a?null:"none"}).text(function(t){return t.label}),this.node=this.svg.selectAll("circle,text"),this.zoomTo([a.x,a.y,2*a.r])},o.prototype.zoom=function(e){var i=this,n=e;this.svg.selectAll("circle").filter(function(t){return t===n});var a=this.svg.selectAll("text").filter(function(t){return t!==n&&"inline"===this.style.display});a.transition().duration(500).style("opacity",0).each("end",function(e){e!==n&&t.select(this).style("display","none").style("opacity",1)});var o=this.svg.transition().duration(1e3).tween("zoom",function(e){var a=t.interpolateZoom(i.view,[n.x,n.y,2*n.r]);return function(t){i.zoomTo(a(t))}});o.selectAll("text").filter(function(t){return t.parent===n||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===n?1:0}).each("start",function(t){t.parent===n&&(this.style.display="inline")}).each("end",function(t){t.parent!==n&&(this.style.display="none")})},o.prototype.zoomTo=function(t){var e=this.diameter/t[2];this.view=t,this.node.attr("transform",function(i){return"translate("+(i.x-t[0])*e+","+(i.y-t[1])*e+")rotate(-30)"}),this.circle.attr("r",function(t){return t.r*e})},o}),function(t,e){"function"==typeof define&&define.amd?define("tree/Dendrogram.js",["d3","../common/SVGWidget","../api/ITree","css!./Dendrogram"],e):t.tree_Dendrogram=e(t.d3,t.common_SVGWidget,t.api_ITree)}(this,function(t,e,i){function n(t){e.call(this),i.call(this),this._drawStartPos="origin",this._maxTextWidth=0}return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype._class+=" tree_Dendrogram",n.prototype["implements"](i.prototype),n.prototype.publish("paletteID","default","set","Palette ID",n.prototype._palette["switch"](),{tags:["Basic","Shared"]}),n.prototype.publish("textOffset",8,"number","Text offset from circle",null,{tags:["Private"]}),n.prototype.publish("orientation","horizontal","set","Orientation",["horizontal","vertical"],{tags:["Private"]}),n.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),n.prototype.enter=function(i,n){e.prototype.enter.apply(this,arguments);var a=this;this.layout=t.layout.cluster(),this.diagonal=t.svg.diagonal().projection(function(t){return"horizontal"===a.orientation()?[t.y,t.x]:[t.x,t.y]})},n.prototype.update=function(i,n,a){var o=this;e.prototype.update.apply(this,arguments),this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.x(this._maxTextWidth);var r=this.width()-2*this._maxTextWidth;"horizontal"===this.orientation()?this.layout.size([this.height(),r]):this.layout.size([r,this.height()]);var s=this.layout.nodes(this.data()),l=this.layout.links(s),c=n.selectAll(".link").data(l);c.enter().append("path").attr("class","link"),c.attr("d",this.diagonal),c.exit().remove();var h=n.selectAll(".node").data(s);h.enter().append("g").attr("class","node").on("click",function(t){o.click(t)}).each(function(e){var i=t.select(this);i.append("circle"),i.append("text")});var p=0;h.attr("transform",function(t){return"horizontal"===o.orientation()?"translate("+t.y+","+t.x+")":"translate("+t.x+","+t.y+")"}),h.select("circle").attr("r",4.5).style("fill",function(t){return o._palette(t.label)}).append("title").text(function(t){return t.label}),h.select("text").style("text-anchor",function(t){return t.children?"end":"start"}).attr("dx",function(t){return t.children?-o.textOffset():o.textOffset()}).attr("dy",3).text(function(t){return t.label}).each(function(e){if(!a){var i=t.select(this).node().getBBox();i.width>p&&(p=i.width)}}),p+=this.textOffset(),h.exit().remove(),a||this._maxTextWidth===p||(this._maxTextWidth=p,this.update(i,n,!0))},n}),function(t,e){"function"==typeof define&&define.amd?define("tree/SunburstPartition.js",["d3","../common/SVGWidget","../api/ITree","../common/Text","../common/FAChar","css!./SunburstPartition"],e):t.tree_SunburstPartition=e(t.d3,t.common_SVGWidget,t.api_ITree,t.common_Text,t.common_FAChar)}(this,function(t,e,i,n,a){function o(t){e.call(this),i.call(this)}return o.prototype=Object.create(e.prototype),o.prototype.constructor=o,o.prototype._class+=" tree_SunburstPartition",o.prototype["implements"](i.prototype),o.prototype.publish("paletteID","default","set","Palette ID",o.prototype._palette["switch"](),{tags:["Basic","Shared"]}),o.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),o.prototype.root=function(t){return arguments.length?(this._root=t,this.svg&&this.svg.selectAll("path").transition().duration(750).attrTween("d",this.arcTweenFunc(this._root)),this):this._root||this.data()},o.prototype.data=function(){var t=e.prototype.data.apply(this,arguments);return arguments.length&&(this._resetRoot=!0),t},o.prototype.enter=function(e,i){var n=this;this.radius=Math.min(this.width(),this.height())/2,this._xScale=t.scale.linear().range([0,2*Math.PI]),this._yScale=t.scale.sqrt().range([0,this.radius]),this.partition=t.layout.partition().value(function(t){return void 0!==t.value?t.value:1}),this.arc=t.svg.arc().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,n._xScale(t.x)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,n._xScale(t.x+t.dx)))}).innerRadius(function(t){return Math.max(0,n._yScale(t.y))}).outerRadius(function(t){return Math.max(0,n._yScale(t.y+t.dy))}),this.svg=i.append("g")},o.prototype.update=function(e,i){function n(e){t.event&&t.event.stopPropagation(),a.root(e)}var a=this;this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.radius=Math.min(this.width(),this.height())/2,this._xScale.range([0,2*Math.PI]),this._yScale.range([0,this.radius]),this._dataNodes=this.partition.nodes(this.data());var o=this.svg.selectAll("path").data(this._dataNodes,function(t,e){return void 0!==t.id?t.id:e});o.enter().append("path").on("click",function(t){a.click(t)}).on("dblclick",n).append("title"),o.attr("d",this.arc).style("fill",function(t){return t.__viz_fill?t.__viz_fill:a._palette(t.label)}).style("stroke",function(t){return t.value>16?"white":"none"}).select("title").text(function(t){return t.label}),o.exit().remove(),this._resetRoot&&(this._resetRoot=!1,this.root(this._dataNodes[0]))},o.prototype.arcTweenFunc=function(e){var i=t.interpolate(this._xScale.domain(),[e.x,e.x+e.dx]),n=t.interpolate(this._yScale.domain(),[e.y,1]),a=t.interpolate(this._yScale.range(),[e.y?20:0,this.radius]),o=this;return function(t,e){return e?function(e){return o.arc(t)}:function(e){return o._xScale.domain(i(e)),o._yScale.domain(n(e)).range(a(e)),o.arc(t)}}},o});