!function(t,i){"function"==typeof define&&define.amd?define(["../common/HTMLWidget"],i):t.other_Image=i(t.common_HTMLWidget)}(this,function(t){function i(){t.call(this),this._tag="img",this._prevSource=void 0}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" other_Image",i.prototype.publish("source",null,"string","Image Source",null,{tags:["Basic"]}),i.prototype.publish("sizing","actual","set","Controls sizing mode",["actual","fit","custom"],{tags:["Basic"]}),i.prototype.publish("customWidth","50%","string","Applies this width to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"]}),i.prototype.publish("customHeight","20%","string","Applies this height to IMG element if 'sizing' is set to 'custom'",null,{tags:["Basic"]}),i.prototype.publish("lockAspectRatio",!0,"boolean","Locks the aspect ratio when scaling/stretching",null,{tags:["Basic"]}),i.prototype.enter=function(i,e){t.prototype.enter.apply(this,arguments),e.attr("src",this.source()),this._prevSource=this.source(),this.initSource(e)},i.prototype.update=function(i,e){t.prototype.update.apply(this,arguments),this.changedSource()&&this.initSource(e),"custom"===this.sizing()?e.style({width:this.customWidth(),height:this.customHeight()}):"actual"===this.sizing()?e.style({width:"auto",height:"auto"}):"fit"===this.sizing()&&e.style({width:"100%",height:"100%"}),this.lockAspectRatio()&&this.applyAspectRatio(e);var o=e.node().getBoundingClientRect();this._projectScaleY=o.height/this._sourceHeight,this._projectScaleX=o.width/this._sourceWidth},i.prototype.changedSource=function(){return this._prevSource!==this.source()},i.prototype.exit=function(i,e){t.prototype.exit.apply(this,arguments)},i.prototype.initSource=function(t){t.attr("src",this.source()),t.style({width:"auto",height:"auto"}),this._prevSource=this.source(),this._sourceBBox=t.node().getBoundingClientRect(),this._sourceWidth=this._sourceBBox.width,this._sourceHeight=this._sourceBBox.height,this._ratio=this._sourceBBox.width/this._sourceBBox.height},i.prototype.projection=function(t,i){return{x:t*this._projectScaleX,y:i*this._projectScaleY}},i.prototype.applyAspectRatio=function(t){var i=t.node().getBoundingClientRect();i.width<i.height?t.style({height:1/this._ratio*i.width+"px"}):t.style({width:this._ratio*i.height+"px"})},i});