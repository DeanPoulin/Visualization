!function(e,t){"function"==typeof define&&define.amd?define(["d3","require","es6-promise"],t):e.common_Utility=t(e.d3,e.require)}(this,function(e,t){function n(e,t,n,i,r){var o,c,s=/(^([+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?)?$|^0x[0-9a-f]+$|\d+)/gi,a=/(^[ ]*|[ ]*$)/g,l=/(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,d=/^0x[0-9a-f]+$/i,u=/^0/,p=function(e){return!r&&(""+e).toLowerCase()||""+e},f=p(i?e[i]:e).replace(a,"")||"",m=p(i?t[i]:t).replace(a,"")||"",h=f.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),v=m.replace(s,"\x00$1\x00").replace(/\0$/,"").replace(/^\0/,"").split("\x00"),w=parseInt(f.match(d),16)||1!==h.length&&f.match(l)&&Date.parse(f),g=parseInt(m.match(d),16)||w&&m.match(l)&&Date.parse(m)||null;if(g){if(g>w)return"ascending"===n?-1:1;if(w>g)return"ascending"===n?1:-1}for(var y=0,_=Math.max(h.length,v.length);_>y;y++){if(o=!(h[y]||"").match(u)&&parseFloat(h[y])||h[y]||0,c=!(v[y]||"").match(u)&&parseFloat(v[y])||v[y]||0,isNaN(o)!==isNaN(c))return isNaN(o)?1:-1;if(typeof o!=typeof c&&(o+="",c+=""),c>o)return"ascending"===n?-1:1;if(o>c)return"ascending"===n?1:-1}return 0}function i(){this.items={}}function r(e){this._widgetElement=e}return i.prototype.clear=function(){for(var e in this.items)this.items[e].element().classed("selected",!1);this.items={}},i.prototype.isEmpty=function(){for(var e in this.items)return!1;return!0},i.prototype.append=function(e){this.items[e._id]=e,e.element().classed("selected",!0)},i.prototype.remove=function(e){this.items[e._id].element().classed("selected",!1),delete this.items[e._id]},i.prototype.isSelected=function(e){return void 0!==this.items[e._id]},i.prototype.get=function(){var e=[];for(var t in this.items)e.push(this.items[t]);return e},i.prototype.set=function(e){this.clear(),e.forEach(function(e,t){this.append(e)},this)},i.prototype.click=function(e,t){t.ctrlKey?this.items[e._id]?this.remove(e):this.append(e):(this.clear(),this.append(e))},r.prototype.enter=function(t,n){var i=this;t.on("click.SimpleSelection",function(t,n){var r=e.select(this),o=r.classed("selected");i._widgetElement.selectAll(".selected").classed("selected",null),o||r.classed("selected",!0)}).on("mouseover.SimpleSelection",function(t,n){e.select(this).classed("over",!0)}).on("mouseout.SimpleSelection",function(t,n){e.select(this).classed("over",null)})},r.prototype.selected=function(t){return e.select(t).classed("selected")},{naturalSort:function(e,t,i,r){return e.slice(0).sort(function(e,o){return n(e,o,t,i,r)})},multiSort:function(t,n){return t.sort(function(t,i){for(var r=0;r<n.length;++r){var o=t[n[r].idx],c=i[n[r].idx];if(o!==c)return n[r].reverse?e.descending(o,c):e.ascending(o,c)}return 0}),t},Selection:i,SimpleSelection:r,urlParams:function(){var e=window.location.search.split("?")[1],t={};return e&&e.split("&").forEach(function(e,n){var i=e.split("=");switch(i.length){case 1:t[decodeURIComponent(i[0])]=void 0;break;case 2:t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]);break;default:throw"Invalid URL Param:  "+e}}),t},endsWith:function(e,t,n){var i=e.toString();("number"!=typeof n||!isFinite(n)||Math.floor(n)!==n||n>i.length)&&(n=i.length),n-=t.length;var r=i.indexOf(t,n);return-1!==r&&r===n},d3ArrayAdapter:function(e){return{ownerDocument:{createElement:function(t){return{get __data__(){return this.row},set __data__(t){this.row=e[this.index]=t}}},createElementNS:function(e,t){return this.createElement(t)}},querySelectorAll:function(t){if(t)throw"unsupported";var n=this;return e.map(function(t,i){return{ownerDocument:n.ownerDocument,parentNode:n,get __data__(){return t},set __data__(t){e[i]=t}}})},appendChild:function(t){return t.parentNode=this,t.index=e.length,e.push(null),t},insertBefore:function(t,n){var i=e.indexOf(t.__data__),r=e.indexOf(n.__data__);return i>r?e.splice(r,0,e.splice(i,1)[0]):r-1>i&&e.splice(r-1,0,e.splice(i,1)[0]),t},removeChild:function(t){return e.splice(e.indexOf(t.__data__),1),t}}},downloadBlob:function(t,n,i){i=i||"data";var r=new Date,o=e.time.format("%Y-%m-%dT%H_%M_%S"),c=o(r),s=i+"_"+c+"."+t.toLowerCase(),a="";switch(t){case"TSV":a="text/tab-seperated-values";break;case"JSON":a="application/json";break;default:a="text/csv"}var l=document.createElement("a");if(navigator.msSaveBlob)return l=null,navigator.msSaveBlob(new Blob([n],{type:a}),s);if("download"in l)return l.href="data:"+a+","+encodeURIComponent(n),l.setAttribute("download",s),document.body.appendChild(l),setTimeout(function(){l.click(),document.body.removeChild(l)},10),!0;l=null;var d=document.createElement("iframe");return document.body.appendChild(d),d.src="data:"+a+","+encodeURIComponent(n),setTimeout(function(){document.body.removeChild(d)},100),!0},requireWidget:function(e){return new Promise(function(n,i){var r=e.split("."),o="src/"+r[0].split("_").join("/");t([o],function(e){n(r.length>1?e[r[1]]:e)})})}}});