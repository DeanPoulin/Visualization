(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/SVGWidget"],t):e.chart_XYAxis=t(e.d3,e.common_SVGWidget)})(this,function(e,t){function n(n){t.call(this),this._drawStartPos="origin",this._xScale="",this.parseDate=e.time.format("%Y-%m-%d").parse}return n.prototype=Object.create(t.prototype),n.prototype.xScale=function(e){return arguments.length?(this._xScale=e,this):this._xScale},n.prototype.enter=function(t,n){this.x=null;switch(this._xScale){case"DATE":this.x=e.time.scale();break;default:this.x=e.scale.ordinal()}this.y=e.scale.linear(),this.xAxis=e.svg.axis().orient("bottom").scale(this.x),this.yAxis=e.svg.axis().orient("left").scale(this.y).tickFormat(e.format(".2s")).ticks(10),this.svg=n.append("g"),this.svgData=this.svg.append("g"),this.svgXAxis=this.svg.append("g").attr("class","x axis"),this.svgYAxis=this.svg.append("g").attr("class","y axis")},n.prototype.calcMargin=function(e,t){var n={top:8,right:0,bottom:24,left:40},r=this.height()-n.top-n.bottom,i=t.append("g"),s=i.append("g").attr("class","x axis").attr("transform","translate(0,"+r+")").call(this.xAxis),o=i.append("g").attr("class","y axis").call(this.yAxis),u=s.node().getBBox(),a=o.node().getBBox();return n.bottom=u.height,n.left=a.width,i.remove(),n},n.prototype.update=function(t,n){var r=this;switch(this._xScale){case"DATE":var i=e.min(this._data,function(t){return e.min(t,function(e){return r.parseDate(e[0])})}),s=e.max(this._data,function(t){return e.max(t,function(e){return r.parseDate(e[0])})});this.x.domain([i,s]);break;default:this.x.domain(this._data.map(function(e){return e[0]}))}var o=e.min(this._data,function(t){return e.min(t.filter(function(e,t){return t>0&&r._columns[t]&&r._columns[t].indexOf("__")!==0}),function(e){return e})}),u=e.max(this._data,function(t){return e.max(t.filter(function(e,t){return t>0&&r._columns[t]&&r._columns[t].indexOf("__")!==0}),function(e){return e})}),a=o-(u-o)/10;o>=0&&a<0&&(a=0),this.y.domain([a,u]),this.x.rangeRoundBands?this.x.rangeRoundBands([0,this.width()],.1):this.x.rangeRound&&this.x.range([0,this.width()]),this.y.range([this.height(),0]);var f=this.calcMargin(t,n),l=this.width()-f.left-f.right,c=this.height()-f.top-f.bottom;this.x.rangeRoundBands?this.x.rangeRoundBands([0,l],.1):this.x.rangeRound&&this.x.range([0,l]),this.y.range([c,0]),this.svg.transition().attr("transform","translate("+f.left+","+f.top+")"),this.svgXAxis.transition().attr("transform","translate(0,"+c+")").call(this.xAxis),this.svgYAxis.transition().call(this.yAxis),this.updateChart(t,n,f,l,c)},n.prototype.updateChart=function(e,t,n,r,i){},n});