!function(t,o){"function"==typeof define&&define.amd?define(["d3","../common/Widget","../layout/AbsoluteSurface","../common/TextBox"],o):t.api_ITooltip=o(t.d3,t.common_Widget,t.layout_AbsoluteSurface,t.common_TextBox)}(this,function(t,o,e,i){function h(){o.call(this),this._textBox=(new i).shape_colorFill("#FFFFFA").shape_colorStroke("#E6E6E1"),this._tooltip=(new e).units("pixels").widget(this._textBox).visible(!1)}return h.prototype=Object.create(o.prototype),h.prototype.publish("tooltipOffset",5,"number","Offset from the cursor",null,{}),h.prototype.lazyTooltipShow=h.prototype.debounce(function(t,o,e,i){var h=this;if(void 0!==t){this._textBox.columns(void 0===e?o:[o[0],o[e]]).data([void 0===e?t:[t[0],t[e]]]).text(t[0]+", "+o[e]+":  "+t[e]),this._tooltip._target?this._textBox.render():this._tooltip.target(this._parentOverlay.node()).render(function(t){h._textBox._parentElement&&h._textBox._parentElement.style("overflow","hidden")});var n=this._textBox.getBBox(!0),s=i[0]-n.width/2;0>s?s=0:s+n.width>this.width()&&(s=this.width()-n.width);var l=i[1]-n.height-this.tooltipOffset();0>l?l=i[1]+this.tooltipOffset():l+n.height>this.height()&&(l=this.height()-n.height-this.tooltipOffset()),this._tooltip.widgetX(s).widgetY(l).widgetWidth(n.width).widgetHeight(n.height)}this._tooltip.visible(void 0!==t).render()},250),h.prototype.tooltipShow=function(o,e,i){this.lazyTooltipShow(o,e,i,t.mouse(this._parentOverlay.node()))},h});