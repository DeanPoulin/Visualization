!function(t,e){"function"==typeof define&&define.amd?define(["d3","topojson","./Layer","../other/HeatMap","../common/Palette","../api/ITooltip","css!./Heat"],e):t.map_Heat=e(t.d3,t.topojson,t.map_Layer,t.other_HeatMap,t.common_Palette,t.api_ITooltip)}(this,function(t,e,o,a,r,p){function i(){o.call(this)}return i.prototype=Object.create(o.prototype),i.prototype.constructor=i,i.prototype._class+=" map_Heat",i.prototype.publish("opacity",1,"number","Opacity",null,{tags:["Advanced"]}),i.prototype.publish("meshColor",null,"html-color","Stroke Color",null,{optional:!0}),i.prototype.publish("meshStrokeWidth",.25,"number","Stroke Width"),i.prototype.layerEnter=function(t,e,r){o.prototype.layerEnter.apply(this,arguments),this._parentOverlay.style("pointer-events","none"),this._heatTransform=r.style("pointer-events","none").append("div").attr("class",this.classID()).style("width",t.width()+"px").style("height",t.height()+"px"),this.heat=(new a).target(this._heatTransform.node())},i.prototype.layerUpdate=function(t){o.prototype.layerUpdate.apply(this,arguments),this._heatTransform.style("opacity",this.opacity()).style("width",t.width()+"px").style("height",t.height()+"px"),this.heat.resize(t.size()),this.heat.columns(this.columns()).data(this.data().map(function(e){var o=t.project(e[0],e[1]);return[o[0],o[1],e[4]]})).render()},i.prototype.layerExit=function(t){delete this._prevProjection,this.heat.target(null),delete this.heat},i.prototype.layerZoomed=function(t){o.prototype.layerZoomed.apply(this,arguments),this.heat.columns(this.columns()).data(this.visible()?this.data().map(function(e){var o=t.project(e[0],e[1]);return[o[0],o[1],e[4]]}):[]).render()},i});