!function(t,o){"function"==typeof define&&define.amd?define(["d3","topojson","./Choropleth","./us-counties","../common/Utility"],o):t.map_ChoroplethCounties=o(t.d3,t.topojson,t.map_Choropleth,t.map_usCounties,t.common_Utility)}(this,function(t,o,e,n,a){function i(){e.call(this),this.projection("albersUsaPr"),this._choroTopology=n.topology,this._choroTopologyObjects=n.topology.objects.counties}var s=o.feature(n.topology,n.topology.objects.counties).features,r={};for(var p in s)s[p].id&&(r[s[p].id]=s[p]);var l=t.format("05d");return i.prototype=Object.create(e.prototype),i.prototype.constructor=i,i.prototype._class+=" map_ChoroplethCounties",i.prototype.publish("onClickFormatFIPS",!1,"boolean","format FIPS code as a String on Click"),i.prototype.layerEnter=function(o,n,i){e.prototype.layerEnter.apply(this,arguments),this._choroplethCounties=this._choroplethTransform.insert("g",".mesh"),this._selection=new a.SimpleSelection(this._choroplethCounties),this.choroPaths=t.select(null)},i.prototype.layerUpdate=function(t){e.prototype.layerUpdate.apply(this,arguments),this.choroPaths=this._choroplethCounties.selectAll(".data").data(this.visible()?this.data():[],function(t){return t[0]});var o=this;this.choroPaths.enter().append("path").attr("class","data").call(this._selection.enter.bind(this._selection)).on("click",function(t){if(o._dataMap[t[0]]){var e=o.onClickFormatFIPS()?o._dataMap[t[0]].map(function(t,e){return o.onClickFormatFIPS()&&0===e?l(t):t}):o._dataMap[t[0]];o.click(o.rowToObj(e),"weight",o._selection.selected(this))}}).on("mouseover.tooltip",function(t){o.tooltipShow([n.countyNames[t[0]],o._dataMap[t[0]]?o._dataMap[t[0]][1]:"N/A"],o.columns(),1)}).on("mouseout.tooltip",function(t){o.tooltipShow()}).on("mousemove.tooltip",function(t){o.tooltipShow([n.countyNames[t[0]],o._dataMap[t[0]]?o._dataMap[t[0]][1]:"N/A"],o.columns(),1)}),this.choroPaths.attr("d",function(o){var e=t._d3GeoPath(r[o[0]]);return e||console.log("Unknown US County:  "+o),e}).style("fill",function(t){var e=o._palette(t[1],o._dataMinWeight,o._dataMaxWeight);return e}),this.choroPaths.exit().remove()},i});