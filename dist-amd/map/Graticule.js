!function(t,e){"function"==typeof define&&define.amd?define(["d3","topojson","./Layer","../common/Palette","../api/ITooltip","css!./Graticule"],e):t.map_Graticule=e(t.d3,t.topojson,t.map_Layer,t.common_Palette,t.api_ITooltip)}(this,function(t,e,o,i,a){function r(){o.call(this),a.call(this),this._dataMap={},this._path=t.select(null)}return r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype._class+=" map_Graticule",r.prototype["implements"](a.prototype),r.prototype.publish("opacity",1,"number","Opacity",null,{tags:["Advanced"]}),r.prototype.publish("meshColor",null,"html-color","Stroke Color",null,{optional:!0}),r.prototype.publish("meshStrokeWidth",.25,"number","Stroke Width"),r.prototype.layerEnter=function(e,i,a){o.prototype.layerEnter.apply(this,arguments),this._graticule=t.geo.graticule(),this._graticulePath=i.append("path").datum(this._graticule).attr("class","graticule"),this._graticuleOutlinePath=i.append("path").datum(this._graticule.outline).attr("class","graticuleOutline")},r.prototype.layerUpdate=function(t){return this.visible()?(this._prevProjection!==t.projection()&&(this._graticulePath.attr("d",t._d3GeoPath),this._graticuleOutlinePath.attr("d",t._d3GeoPath),this._prevProjection=t.projection()),this._graticulePath.style("stroke",this.meshColor()),void this._graticuleOutlinePath.style("stroke",this.meshColor())):(this._graticulePath.attr("d",""),this._graticuleOutlinePath.attr("d",""),void delete this._prevProjection)},r.prototype.layerExit=function(t){delete this._prevProjection},r.prototype.layerZoomed=function(t){this._graticulePath.style("opacity",this.opacity()).attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",this.meshStrokeWidth()/t._zoom.scale()+"px"),this._graticuleOutlinePath.style("opacity",this.opacity()).attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",this.meshStrokeWidth()/t._zoom.scale()+"px")},r});