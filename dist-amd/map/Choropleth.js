!function(t,e){"function"==typeof define&&define.amd?define(["d3","topojson","./Layer","../common/Palette","../api/ITooltip","css!./Choropleth"],e):t.map_Choropleth=e(t.d3,t.topojson,t.map_Layer,t.common_Palette,t.api_ITooltip)}(this,function(t,e,o,a,i){function r(){o.call(this),i.call(this),this._dataMap={},this._path=t.select(null)}return r.prototype=Object.create(o.prototype),r.prototype.constructor=r,r.prototype._class+=" map_Choropleth",r.prototype["implements"](i.prototype),r.prototype._palette=a.rainbow("default"),r.prototype.publish("paletteID","YlOrRd","set","Palette ID",r.prototype._palette["switch"](),{tags:["Basic","Shared"]}),r.prototype.publish("useClonedPalette",!1,"boolean","Enable or disable using a cloned palette",null,{tags:["Intermediate","Shared"]}),r.prototype.publish("opacity",1,"number","Opacity",null,{tags:["Advanced"]}),r.prototype.publish("meshVisible",!0,"boolean","Mesh Visibility"),r.prototype.publish("meshColor",null,"html-color","Stroke Color",null,{optional:!0}),r.prototype.publish("meshStrokeWidth",.25,"number","Stroke Width"),r.prototype.publish("internalOnly",!1,"boolean","Internal mesh only"),r.prototype.data=function(t){var e=o.prototype.data.apply(this,arguments);if(arguments.length){this._dataMap={},this._dataMinWeight=null,this._dataMaxWeight=null;var a=this;this.data().forEach(function(t){a._dataMap[t[0]]=t,(!a._dataMinWeight||t[1]<a._dataMinWeight)&&(a._dataMinWeight=t[1]),(!a._dataMaxWeight||t[1]>a._dataMaxWeight)&&(a._dataMaxWeight=t[1])})}return e},r.prototype.layerEnter=function(t,e,a){o.prototype.layerEnter.apply(this,arguments),this._choroplethTransform=e.append("g"),this._choropleth=this._choroplethTransform.append("path").attr("class","mesh")},r.prototype.layerUpdate=function(t){return o.prototype.layerUpdate.apply(this,arguments),this._palette=this._palette["switch"](this.paletteID()),this.useClonedPalette()&&(this._palette=this._palette.cloneNotExists(this.paletteID()+"_"+this.id())),this.visible()&&this.meshVisible()?((this._prevProjection!==t.projection()||this._prevInternalOnly!==this.internalOnly())&&(this._choropleth.attr("d",t._d3GeoPath(e.mesh(this._choroTopology,this._choroTopologyObjects,this.internalOnly()?function(t,e){return t!==e}:function(t,e){return!0}))),this._prevProjection=t.projection(),this._prevInternalOnly=this.internalOnly()),void this._choroplethTransform.style("opacity",this.opacity()).style("stroke",this.meshColor())):(this._choropleth.attr("d",""),void delete this._prevProjection)},r.prototype.layerExit=function(t){delete this._prevProjection,delete this._prevInternalOnly},r.prototype.layerZoomed=function(t){o.prototype.layerZoomed.apply(this,arguments),this._choroplethTransform.attr("transform","translate("+t._zoom.translate()+")scale("+t._zoom.scale()+")").style("stroke-width",this.meshStrokeWidth()/t._zoom.scale()+"px")},r.prototype.click=function(t,e,o){console.log("Click:  "+JSON.stringify(t)+", "+e+", "+o)},r});