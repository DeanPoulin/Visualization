(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","./Input","./Slider","css!./Form"],t):e.form_Form=t(e.d3,e.common_HTMLWidget,e.form_Input,e.form_Slider)})(this,function(e,t,n,r){function i(){t.call(this),this._tag="form"}return i.prototype=Object.create(t.prototype),i.prototype._class+=" form_Form",i.prototype.publish("validate",!0,"boolean","Enable/Disable input validation"),i.prototype.publish("inputs",[],"widgetArray","Array of input widgets"),i.prototype.publish("controls",[],"widgetArray","Array of input widgets to control form functionality"),i.prototype.testData=function(){this.inputs([(new n).name("textbox-test").label("Alphanumeric").type("textbox").validate("^[A-Za-z0-9]+$").value("SomeString123"),(new n).name("textbox-test").label("Only Alpha").type("textbox").validate("^[A-Za-z]+$").value("SomeString"),(new n).name("number-test").label("Number Test").type("number").validate("\\d+").value(123),(new n).name("checkbox-test").label("Checkbox Test").type("checkbox").value(!0),(new n).name("select-test").label("Select Test").type("select").selectOptions(["A","B","C"]).value("B"),(new n).name("button-test").label("Button Test").type("button").value("Button Text"),(new n).name("textarea-test").label("Textarea Test").type("textarea").value("Textarea Text"),(new r).name("slider-test").label("Slider Test").value(66)]);var e=this;return this.controls([(new n).type("button").value("Submit").on("click",function(){e.submit()},!0),(new n).type("button").value("Clear").on("click",function(){e.clear()},!0)]),this},i.prototype.submit=function(){var e=!0;this.validate()&&(e=this.checkValidation());if(e){var t=[],n=this.inputs();n.forEach(function(e){t.push({name:e.name(),value:e.value()})}),console.log("Clicked Submit: "+JSON.stringify(t))}},i.prototype.clear=function(){var e=this.inputs();e.forEach(function(e){e.type()==="checkbox"?(e.value(!1),e._inputElement.node().checked=!1):(e.value(" "),e._inputElement.node().value=" ")})},i.prototype.checkValidation=function(){var e=!0,t=[];return this.inputs().forEach(function(e){e.isValid()||t.push("'"+e.label()+"'"+" value is invalid.")}),t.length>0&&(alert(t.join("\n")),e=!1),e},i.prototype.enter=function(n,r){t.prototype.enter.apply(this,arguments),r.on("submit",function(){e.event.preventDefault()}),this._parentElement.style("overflow","auto");var i=r.append("table");this.tbody=i.append("tbody");var s=i.append("tfoot").append("tr").append("td").attr("colspan","2");this.controls().reverse().forEach(function(e){var t=s.append("div").style("float","right");e.target(t.node()).render()})},i.prototype.update=function(n,i){t.prototype.update.apply(this,arguments);var s=this.tbody.selectAll("tr").data(this.inputs());s.enter().append("tr").each(function(t,n){var i=e.select(this);i.append("td").attr("class","prompt").text(t.label()+":");var s=i.append("td").attr("class","input");t.target(s.node()).render();if(t instanceof r){var o=t.element().node().getBBox();s.style("height",o.height+"px"),t.resize().render()}}),s.exit().remove()},i.prototype.exit=function(e,n){t.prototype.exit.apply(this,arguments)},i});