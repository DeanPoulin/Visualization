(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../layout/Surface","../common/Icon","css!./Popup"],t):e.layout_Popup=t(e.d3,e.common_HTMLWidget,e.layout_Surface,e.common_Icon)})(this,function(e,t,n,r){function i(){t.call(this),this._tag="div",this._surfaceButtons=[]}return i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype._class+=" layout_Popup",i.prototype.publish("popupState",!1,"boolean","State of the popup, visible (true) or hidden (false)",null,{}),i.prototype.publish("top",null,"number","Top position property of popup",null,{}),i.prototype.publish("bottom",null,"number","Bottom position property of popup",null,{}),i.prototype.publish("left",null,"number","Left position property of popup",null,{}),i.prototype.publish("right",null,"number","Right position property of popup",null,{}),i.prototype.publish("position","relative","set","Value of the 'position' property",["absolute","relative","fixed","static","initial","inherit"],{tags:["Private"]}),i.prototype.publish("showTestButton",!1,"boolean","Test Button in target",null,{}),i.prototype.publish("buttonName",null,"string","Button name property",null,{}),i.prototype.publish("buttonLabel","","string","Button label text",null,{}),i.prototype.publish("widget",null,"widget","Widget",null,{tags:["Private"]}),i.prototype.testData=function(){this.showTestButton(!0),this.position("absolute"),this.top(30);var e=this;return this._testButton=(new r).on("click",function(){e.updateState(!e.popupState())},!0),this.widget((new n).widget((new r).testData())),this},i.prototype.widgetSize=function(e){var t=this.clientWidth()-this.calcFrameWidth(e),n=this.clientHeight()-this.calcFrameHeight(e);return{width:t,height:n}},i.prototype.updateState=function(e){this.popupState(e).render()},i.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),this._testButton&&this._testButton.target(e.parentNode).render()},i.prototype.update=function(n,r){t.prototype.update.apply(this,arguments);var i=this;this.popupState()?r.style("display","block"):r.style("display","none");var s=r.selectAll("#"+this._id+" > .popupWidget").data(this.widget()?[this.widget()]:[],function(e){return e._id});s.enter().append("div").attr("class","popupWidget").each(function(e){e.target(this)}),s.each(function(t){var n=i.widgetSize(e.select(this));t.resize({width:n.width,height:n.height})}),s.exit().each(function(e){e.target(null)}).remove()},i.prototype.postUpdate=function(e,t){t.style("position",this.position()).style("left",this.left()+"px").style("right",this.right()+"px").style("top",this.top()+"px").style("bottom",this.bottom()+"px")},i.prototype.exit=function(e,n){this.widget()&&(this.widget(null),this.render()),t.prototype.exit.apply(this,arguments)},i.prototype.click=function(e){console.log("Clicked: "+e.id)},i});