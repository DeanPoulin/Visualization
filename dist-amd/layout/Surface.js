(function(e,t){typeof define=="function"&&define.amd?define(["d3","../common/HTMLWidget","../chart/MultiChart","css!./Surface"],t):e.layout_Surface=t(e.d3,e.common_HTMLWidget,e.chart_MultiChart)})(this,function(e,t,n){function r(){t.call(this),this._tag="div"}return r.prototype=Object.create(t.prototype),r.prototype._class="layout_Surface",r.prototype.publish("padding",null,"number","Surface Padding (px)",null,{tags:["Intermediate"]}),r.prototype.publish("titlePadding",null,"number","Title Padding (px)",null,{tags:["Intermediate"]}),r.prototype.publish("titleFontSize",null,"string","Title Font Size",null,{tags:["Basic"]}),r.prototype.publish("titleFontColor",null,"html-color","Title Font Color",null,{tags:["Basic"]}),r.prototype.publish("titleFontFamily",null,"string","Title Font Family",null,{tags:["Basic"]}),r.prototype.publish("titleFontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Intermediate"]}),r.prototype.publish("titleBackgroundColor",null,"html-color","Title Background Color",null,{tags:["Basic"]}),r.prototype.publish("backgroundColor",null,"html-color","Surface Background Color",null,{tags:["Basic"]}),r.prototype.publish("borderWidth",null,"string","Surface Border Width",null,{tags:["Basic"]}),r.prototype.publish("borderColor",null,"html-color","Surface Border Color",null,{tags:["Basic"]}),r.prototype.publish("borderRadius",null,"string","Surface Border Radius",null,{tags:["Basic"]}),r.prototype.publish("title","","string","Title",null,{tags:["Intermediate"]}),r.prototype.publish("titleAlignment","center","set","Title Alignment",["left","right","center"],{tags:["Intermediate"]}),r.prototype.publish("widget",null,"widget","Widget",null,{tags:["Advanced"]}),r.prototype.testData=function(){return this.title("ABC"),this.widget((new r).widget((new n).testData())),this},r.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments)},r.prototype.update=function(n,r){t.prototype.update.apply(this,arguments),r.style("border-width",this.borderWidth()).style("border-color",this.borderColor()).style("border-radius",this.borderRadius()).style("background-color",this.backgroundColor());var i=r.selectAll(".surfaceTitle").data(this.title()?[this.title()]:[]);i.enter().insert("h3","div").attr("class","surfaceTitle"),i.text(function(e){return e}).style("text-align",this.titleAlignment()).style("color",this.titleFontColor()).style("font-size",this.titleFontSize()).style("font-family",this.titleFontFamily()).style("font-weight",this.titleFontBold()?"bold":"normal").style("background-color",this.titleBackgroundColor()).style("padding",this.titlePadding()+"px"),i.exit().remove();var s=r.selectAll("#"+this._id+" > .surfaceWidget").data(this.widget()?[this.widget()]:[],function(e){return e._id}),o=this;s.enter().append("div").attr("class","surfaceWidget").each(function(e){e.target(this)}),s.each(function(t){var n=o.clientWidth(),i=o.clientHeight();o.title()&&(i-=o.calcHeight(r.select("h3")));var s=e.select(this);i-=o.calcFrameHeight(s),n-=o.calcFrameWidth(s),t.resize({width:n,height:i})}).style("padding",this.padding()+"px"),s.exit().each(function(e){e.target(null)}).remove()},r.prototype.exit=function(e,n){this.widget()&&(this.widget(null),this.render()),t.prototype.exit.apply(this,arguments)},r.prototype.render=function(e){var n=this;t.prototype.render.call(this,function(t){n.widget()?n.widget().render(function(t){e&&e(t)}):e&&e(t)})},r});