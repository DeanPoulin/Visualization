define("css!src/layout/Surface",[],function(){}),function(e,t){typeof define=="function"&&define.amd?define("src/layout/Surface",["d3","../common/HTMLWidget","../chart/MultiChart","css!./Surface"],t):e.layout_Surface=t(e.d3,e.common_HTMLWidget,e.chart_MultiChart)}(this,function(e,t,n){function r(){t.call(this),this._tag="div"}return r.prototype=Object.create(t.prototype),r.prototype._class="layout_Surface",r.prototype.publish("padding",null,"number","Surface Padding (px)",null,{tags:["Intermediate"]}),r.prototype.publish("titlePadding",null,"number","Title Padding (px)",null,{tags:["Intermediate"]}),r.prototype.publish("titleFontSize",null,"string","Title Font Size",null,{tags:["Basic"]}),r.prototype.publish("titleFontColor",null,"html-color","Title Font Color",null,{tags:["Basic"]}),r.prototype.publish("titleFontFamily",null,"string","Title Font Family",null,{tags:["Basic"]}),r.prototype.publish("titleFontBold",!0,"boolean","Enable Bold Title Font",null,{tags:["Intermediate"]}),r.prototype.publish("titleBackgroundColor",null,"html-color","Title Background Color",null,{tags:["Basic"]}),r.prototype.publish("backgroundColor",null,"html-color","Surface Background Color",null,{tags:["Basic"]}),r.prototype.publish("borderWidth",null,"string","Surface Border Width",null,{tags:["Basic"]}),r.prototype.publish("borderColor",null,"html-color","Surface Border Color",null,{tags:["Basic"]}),r.prototype.publish("borderRadius",null,"string","Surface Border Radius",null,{tags:["Basic"]}),r.prototype.publish("title","","string","Title",null,{tags:["Intermediate"]}),r.prototype.publish("titleAlignment","center","set","Title Alignment",["left","right","center"],{tags:["Intermediate"]}),r.prototype.publish("widget",null,"widget","Widget",null,{tags:["Advanced"]}),r.prototype.testData=function(){return this.title("ABC"),this.widget((new r).widget((new n).testData())),this},r.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments)},r.prototype.update=function(n,r){t.prototype.update.apply(this,arguments),r.style("border-width",this.borderWidth()).style("border-color",this.borderColor()).style("border-radius",this.borderRadius()).style("background-color",this.backgroundColor());var i=r.selectAll(".surfaceTitle").data(this.title()?[this.title()]:[]);i.enter().insert("h3","div").attr("class","surfaceTitle"),i.text(function(e){return e}).style("text-align",this.titleAlignment()).style("color",this.titleFontColor()).style("font-size",this.titleFontSize()).style("font-family",this.titleFontFamily()).style("font-weight",this.titleFontBold()?"bold":"normal").style("background-color",this.titleBackgroundColor()).style("padding",this.titlePadding()+"px"),i.exit().remove();var s=r.selectAll("#"+this._id+" > .surfaceWidget").data(this.widget()?[this.widget()]:[],function(e){return e._id}),o=this;s.enter().append("div").attr("class","surfaceWidget").each(function(e){e.target(this)}),s.each(function(t){var n=o.clientWidth(),i=o.clientHeight();o.title()&&(i-=o.calcHeight(r.select("h3")));var s=e.select(this);i-=o.calcFrameHeight(s),n-=o.calcFrameWidth(s),t.resize({width:n,height:i})}).style("padding",this.padding()+"px"),s.exit().each(function(e){e.target(null)}).remove()},r.prototype.exit=function(e,n){this.widget()&&(this.widget(null),this.render()),t.prototype.exit.apply(this,arguments)},r.prototype.render=function(e){var n=this;t.prototype.render.call(this,function(t){n.widget()?n.widget().render(function(t){e&&e(t)}):e&&e(t)})},r}),function(e,t){typeof define=="function"&&define.amd?define("src/layout/Cell",["./Surface"],t):e.layout_Cell=t(e.layout_Surface,e.chart_Pie,e.c3_Column,e.c3_Line)}(this,function(e,t,n,r){function i(){e.call(this),this._dragHandles=["se"]}return i.prototype=Object.create(e.prototype),i.prototype._class+=" layout_Cell",i.prototype.publish("gridRow",0,"number","Grid Row Position",null,{tags:["Private"]}),i.prototype.publish("gridCol",0,"number","Grid Column Position",null,{tags:["Private"]}),i.prototype.publish("gridRowSpan",1,"number","Grid Row Span",null,{tags:["Private"]}),i.prototype.publish("gridColSpan",1,"number","Grid Column Span",null,{tags:["Private"]}),i.prototype.publish("handleSize",6,"number","Grid Row Position",null,{tags:["Private"]}),i.prototype.enter=function(t,n){e.prototype.enter.apply(this,arguments),n.classed("layout_Surface",!0)},i.prototype.update=function(t,n){e.prototype.update.apply(this,arguments);var r=this,i=n.selectAll(".dragHandle").data(this._dragHandles,function(e){return e});i.enter().append("div").attr("class",function(e){return"dragHandle dragHandle_"+e}).style("position","absolute"),i.style({padding:"0px",margin:"0px",left:function(e){switch(e){case"ne":case"e":case"se":return r._size.width-r.handleSize()+"px";case"nw":case"w":case"sw":return"0px";default:return r._size.width/2-r.handleSize()/2+"px"}},top:function(e){switch(e){case"nw":case"n":case"ne":return"0px";case"sw":case"s":case"se":return r._size.height-r.handleSize()+"px";default:return r._size.height/2-r.handleSize()/2+"px"}},width:r.handleSize()+"px",height:r.handleSize()+"px"}).on("dragstart",function(e){r._dragHandle=e,console.log("dragstart:  "+e)}).on("dragend",function(e){console.log("dragend:  "+(r._dragHandle?r._dragHandle:"")),r._dragHandle=null}),i.exit().remove()},i}),define("css!src/layout/Grid",[],function(){}),function(e,t){typeof define=="function"&&define.amd?define("src/layout/Grid",["d3","../common/HTMLWidget","./Cell","../common/Text","../chart/Pie","../chart/MultiChart","../c3chart/Line","css!./Grid"],t):e.layout_Grid=t(e.d3,e.common_HTMLWidget,e.layout_Cell,e.common_Text,e.chart_Pie,e.chart_MultiChart,e.c3chart_Line)}(this,function(e,t,n,r,i,s,o){function u(){t.call(this),this._tag="div",this.content([])}return u.prototype=Object.create(t.prototype),u.prototype._class+=" layout_Grid",u.prototype.publish("designMode",!1,"boolean","Design Mode",null,{tags:["Private"]}),u.prototype.publish("gutter",4,"number","Gap Between Widgets",null,{tags:["Private"]}),u.prototype.publish("fitTo","all","set","Sizing Strategy",["all","width"],{tags:["Private"]}),u.prototype.publish("content",[],"widgetArray","widgets",null,{tags:["Private"]}),u.prototype.testData=function(){return this.setContent(0,0,(new i).testData()).setContent(0,1,(new i).testData()).setContent(1,0,(new i).testData()).setContent(1,1,(new i).testData()).setContent(0,2,(new s).testData(),"Title AAA",2,2).setContent(2,0,(new o).testData(),"Title BBB",2,4),this},u.prototype.getDimensions=function(){var e={width:0,height:0};return this.content().forEach(function(t){e.width<t.gridCol()+t.gridColSpan()&&(e.width=t.gridCol()+t.gridColSpan()),e.height<t.gridRow()+t.gridRowSpan()&&(e.height=t.gridRow()+t.gridRowSpan())},this),e},u.prototype.clearContent=function(){this.content(this.content().filter(function(e){return e.target(null),!1}))},u.prototype.setContent=function(e,t,r,i,s,o){s=s||1,o=o||1,i=i||"",this.content(this.content().filter(function(n){return n.gridRow()===e&&n.gridCol()===t?(n.target(null),!1):!0}));if(r){var u=(new n).gridRow(e).gridCol(t).widget(r).title(i).gridRowSpan(s).gridColSpan(o);this.content().push(u)}return this},u.prototype.getCell=function(e,t){var n=null;return this.content().some(function(r){return e>=r.gridRow()&&e<r.gridRow()+r.gridRowSpan()&&t>=r.gridCol()&&t<r.gridCol()+r.gridColSpan()?(n=r,!0):!1}),n},u.prototype.getContent=function(e){var t=null;return this.content().some(function(n){return n.widget()._id===e?(t=n.widget(),!0):!1}),t},u.prototype.selectOverElement=function(t,n,r){if(this._dragCell._dragHandle){if(t!==this._dragCell.gridRow()+this._dragCell.gridRowSpan()-1||n!==this._dragCell.gridCol()+this._dragCell.gridColSpan()-1)if(t>=this._dragCell.gridRow()&&n>=this._dragCell.gridCol())return e.select(r)}else{var i=this.getCell(t,n);if(!i||i!==this._dragCell||i.gridRow()!==t||i.gridCol()!==n)return i&&i!==this._dragCell?i._element:e.select(r)}return e.select(null)},u.prototype.childMoved=u.prototype.debounce(function(e,t){this.render()},250),u.prototype.enter=function(e,n){t.prototype.enter.apply(this,arguments),n.style("position","relative"),this.dropDiv=n.append("div"),this.contentDiv=n.append("div"),this._scrollBarWidth=this.getScrollbarWidth()},u.prototype.updateCells=function(t,n){var r=this,i=this.contentDiv.selectAll(".cell_"+this._id).data(this.content(),function(e){return e._id});i.enter().append("div").attr("class","cell_"+this._id).style("position","absolute").on("dragstart",function(t){e.event.stopPropagation(),r._dragCell=t,console.log("dragstart:  "+t._id),setTimeout(function(){r.contentDiv.selectAll(".cell_"+r._id).classed("dragItem",function(e){return t._id===e._id}).classed("notDragItem",function(e){return t._id!==e._id})},0)}).on("dragend",function(t){e.event.stopPropagation(),setTimeout(function(){r.contentDiv.selectAll(".cell_"+r._id).classed("dragItem",!1).classed("notDragItem",!1)},0),r._dragCell=null}).each(function(e){e.target(this),e.__grid_watch=e.watch(function(e,t,n){r._renderCount&&e.indexOf("grid")===0&&t!==n&&r.childMoved()})}),i.style("left",function(e){return e.gridCol()*t+r.gutter()/2+"px"}).style("top",function(e){return e.gridRow()*n+r.gutter()/2+"px"}).style("width",function(e){return e.gridColSpan()*t-r.gutter()+"px"}).style("height",function(e){return e.gridRowSpan()*n-r.gutter()+"px"}).each(function(e){e._parentElement.attr("draggable",r.designMode()).selectAll(".dragHandle").attr("draggable",r.designMode()),e.scale(r.designMode()?.75:0).resize()}),i.exit().each(function(e){e.target(null),e.__grid_watch&&e.__grid_watch.remove()}).remove()},u.prototype.updateDropCells=function(t,n,r){var i=[];if(this.designMode())for(var s=0;s<t.height;++s)for(var o=0;o<t.width;++o)i.push({x:o,y:s});var u=this.dropDiv.selectAll(".dropCell_"+this._id).data(i);u.enter().append("div").attr("class","dropCell dropCell_"+this._id).on("dragover",function(t){e.event.stopPropagation(),console.log("dragover:  "+(a._dragCell?a._dragCell._id:"")+" - "+t.x+", "+t.y+" - "+a._dragCell._dragHandle);var n=a.selectOverElement(t.y,t.x,this);n.empty()?e.event.dataTransfer.dropEffect="none":(e.event.dataTransfer.dropEffect="move",e.event.preventDefault())}).on("dragenter",function(t){e.event.stopPropagation(),console.log("dragenter:  "+(a._dragCell?a._dragCell._id:"")+" - "+t.x+", "+t.y+" - "+a._dragCell._dragHandle),a.selectOverElement(t.y,t.x,this).classed("over",!0)}).on("dragleave",function(t){e.event.stopPropagation(),console.log("dragleave:  "+(a._dragCell?a._dragCell._id:"")+" - "+t.x+", "+t.y+" - "+a._dragCell._dragHandle);var n=a.selectOverElement(t.y,t.x,this).classed("over",!1);e.event.dataTransfer.dropEffect=n.empty()?"none":"none"}).on("drop",function(t){e.event.stopPropagation(),console.log("drop:  "+(a._dragCell?a._dragCell._id:"")+" - "+t.x+", "+t.y+" - "+a._dragCell._dragHandle);var n=a.selectOverElement(t.y,t.x,this).classed("over",!1);if(n.empty())return;if(a._dragCell._dragHandle){var r=t.x,i=t.y,s=t.x-a._dragCell.gridCol(),o=t.y-a._dragCell.gridRow(),u=t.x-(a._dragCell.gridCol()+a._dragCell.gridColSpan())+1,f=t.y-(a._dragCell.gridRow()+a._dragCell.gridRowSpan())+1;switch(a._dragCell._dragHandle){case"nw":a._dragCell.gridRow(i),a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()-o),a._dragCell.gridCol(r),a._dragCell.gridColSpan(a._dragCell.gridColSpan()-s);break;case"n":a._dragCell.gridRow(i),a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()-o);break;case"ne":a._dragCell.gridRow(i),a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()-o),a._dragCell.gridColSpan(a._dragCell.gridColSpan()+u);break;case"e":a._dragCell.gridColSpan(a._dragCell.gridColSpan()+u);break;case"se":a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()+f),a._dragCell.gridColSpan(a._dragCell.gridColSpan()+u);break;case"s":a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()+f);break;case"sw":a._dragCell.gridCol(r),a._dragCell.gridColSpan(a._dragCell.gridColSpan()-s),a._dragCell.gridRowSpan(a._dragCell.gridRowSpan()+f);break;case"w":a._dragCell.gridCol(r),a._dragCell.gridColSpan(a._dragCell.gridColSpan()-s)}}else{var l=t.y,c=t.x,h=a._dragCell.gridRowSpan(),p=a._dragCell.gridColSpan(),d=a.getCell(t.y,t.x);d===a._dragCell&&(h=d.gridRowSpan(),p=d.gridColSpan(),d=null),d&&(l=d.gridRow(),c=d.gridCol(),h=d.gridRowSpan(),p=d.gridColSpan(),d.gridCol(a._dragCell.gridCol()).gridColSpan(a._dragCell.gridColSpan()).gridRow(a._dragCell.gridRow()).gridRowSpan(a._dragCell.gridRowSpan())),a._dragCell.gridCol(c).gridRow(l).gridColSpan(p).gridRowSpan(h)}});var a=this;u.style("position","absolute").style("left",function(e){return e.x*n+a.gutter()/2+"px"}).style("top",function(e){return e.y*r+a.gutter()/2+"px"}).style("width",function(e){return 1*n-a.gutter()+"px"}).style("height",function(e){return 1*r-a.gutter()+"px"}),u.exit().remove()},u.prototype.update=function(e,n){t.prototype.update.apply(this,arguments),this._parentElement.style("overflow-x",this.fitTo()==="width"?"hidden":null),this._parentElement.style("overflow-y",this.fitTo()==="width"?"scroll":null);var r=this.getDimensions();this.designMode()&&(r.width++,r.height++);var i=(this.width()-(this.fitTo()==="width"?this._scrollBarWidth:0))/r.width,s=this.fitTo()==="all"?this.height()/r.height:i;this.updateCells(i,s),this.updateDropCells(r,i,s)},u.prototype.exit=function(e,n){t.prototype.exit.apply(this,arguments)},u.prototype.render=function(e){var n=this;return t.prototype.render.call(this,function(t){if(n.content().length){var r=n.content().length;n.content().forEach(function(n,i){setTimeout(function(){n.render(function(){--r===0&&e&&e(t)})},0)})}else e&&e(t)}),this},u}),function(e){var t=document,n="appendChild",r="styleSheet",i=t.createElement("style");i.type="text/css",t.getElementsByTagName("head")[0][n](i),i[r]?i[r].cssText=e:i[n](t.createTextNode(e))}(".layout_Surface{margin:0;border:1px solid #e5e5e5;border-radius:3px;overflow:hidden}.layout_Surface>h3{margin:0;padding:2px;text-align:center;font-weight:700;background-color:#e5e5e5}.layout_Surface>div{padding:8px}.layout_Grid .cell{border-radius:5px;border:1px solid #e5e5e5;display:inline-block;overflow:hidden}.layout_Grid .cell h2{margin:0;padding-top:4px;-webkit-margin:0;text-align:center}.layout_Grid .dropCell{background-color:lightgrey;opacity:.33;border-radius:5px;border:1px solid #e5e5e5;display:inline-block;overflow:hidden}.layout_Grid .dropCell.over,.layout_Grid .layout_Cell.over{border:2px dashed #000}.layout_Grid .dragItem{z-index:-1;opacity:.33}.layout_Grid .notDragItem{z-index:-1;opacity:1}.layout_Grid div[draggable=true]{opacity:.75;cursor:move}.layout_Grid div[draggable=true] .dragHandle{opacity:1;background-color:darkgray}.layout_Grid div[draggable=true] .dragHandle_nw{cursor:nw-resize}.layout_Grid div[draggable=true] .dragHandle_n{cursor:n-resize}.layout_Grid div[draggable=true] .dragHandle_ne{cursor:ne-resize}.layout_Grid div[draggable=true] .dragHandle_e{cursor:e-resize}.layout_Grid div[draggable=true] .dragHandle_se{cursor:se-resize}.layout_Grid div[draggable=true] .dragHandle_s{cursor:s-resize}.layout_Grid div[draggable=true] .dragHandle_sw{cursor:sw-resize}.layout_Grid div[draggable=true] .dragHandle_w{cursor:w-resize}"),define("hpcc-viz-layout",function(){});